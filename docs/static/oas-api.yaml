openapi: 3.1.0
info:
  title: Morio Management API
  description: >

    ## What am I looking at?

    This is the reference documentation for Morio's __Management API__.

    It is auto-generated from this API's OpenAPI v3 specification.


    ## Links


    - [Morio's GitHub repository at
    `certeu/morio`](https://github.com/certeu/morio/)

    - [Morio's online documentation at `morio.it`](https://morio.it/)
  license:
    name: EUPL
    url: >-
      https://joinup.ec.europa.eu/collection/eupl/eupl-guidelines-faq-infographics
  version: 0.3.0
  x-logo:
    url: /downloads/morio-card-embed.svg
    backgroundColor: transparent
    altText: Morio Logo
  contact:
    name: Morio Team
    url: https://github.com/certeu/morio
    email: morio@morio.it
externalDocs:
  description: Morio Online Documentation
  url: https://morio.it/
tags:
  - name: anonymous
    description: Endpoints that do not require authentication
  - name: accounts
    description: Endpoints for the local accounts identity provider
  - name: apikeys
    description: Endpoints for the local API keys identity provider
  - name: authentication
    description: Endpoints related to authentication
  - name: client packages
    description: Endpoints related to client packages
  - name: cryptography
    description: Endpoints related to cryptography
  - name: docker
    description: Endpoints that leverage the Docker daemon API
  - name: settings
    description: Endpoints related to Morio settings
servers:
  - url: https://false/-/api
    description: Morio management API on false
components:
  schemas:
    Request:
      login:
        apikey:
          type: object
          properties:
            provider:
              type: string
              minLength: 2
              maxLength: 255
              enum:
                - apikey
              description: >-
                ID of the Morio identity provider. Must always be 'apikey' for
                authentication with an API key
            data:
              type: object
              properties:
                api_key:
                  type: string
                  minLength: 96
                  maxLength: 96
                  description: This is the API key (a UUID)
                api_key_secret:
                  type: string
                  minLength: 36
                  maxLength: 36
                  description: This is the API key secret
              required:
                - api_key
                - api_key_secret
              additionalProperties: false
              description: Holds data that is specific to the identity provider
          required:
            - provider
            - data
          additionalProperties: false
        local:
          type: object
          properties:
            provider:
              type: string
              minLength: 2
              maxLength: 255
              enum:
                - local
              description: >-
                ID of the Morio identity provider. Must always be 'local' for
                authentication with a local Morio account
            data:
              type: object
              properties:
                password:
                  type: string
                  minLength: 3
                  maxLength: 1024
                  description: The account's password
                username:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The username of the account
                token:
                  type: string
                  minLength: 3
                  maxLength: 12
                  description: The TOTP token (one-time password)
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
              required:
                - password
                - username
                - token
                - role
              additionalProperties: false
              description: Holds data that is specific to the identity provider
          required:
            - provider
            - data
          additionalProperties: false
        mrt:
          type: object
          properties:
            provider:
              type: string
              minLength: 2
              maxLength: 255
              enum:
                - mrt
              description: >-
                ID of the Morio identity provider. Must always be 'mrt' for
                authentication with the Morio Root Token
            data:
              type: object
              properties:
                mrt:
                  type: string
                  pattern: ^mrt\.[0-9a-z]+$
                  minLength: 68
                  maxLength: 68
                  description: The Morio Root Token
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
              required:
                - mrt
              additionalProperties: false
              description: Holds data that is specific to the identity provider
          required:
            - provider
            - data
          additionalProperties: false
        ldap:
          type: object
          properties:
            provider:
              type: string
              minLength: 2
              maxLength: 255
              description: ID of the Morio identity provider.
            data:
              type: object
              properties:
                password:
                  type: string
                  minLength: 3
                  maxLength: 1024
                  description: Password for the LDAP account
                username:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: Username of the LDAP account
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
              required:
                - password
                - username
                - role
              additionalProperties: false
              description: Holds data that is specific to the identity provider
          required:
            - provider
            - data
          additionalProperties: false
    Response:
      login:
        apikey:
          type: object
          properties:
            jwt:
              type: string
              description: The JSON Web Token
            data:
              type: object
              properties:
                user:
                  type: string
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                provider:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The ID of the identity provider to use for this account
              required:
                - role
              additionalProperties: false
          additionalProperties: false
        local:
          type: object
          properties:
            jwt:
              type: string
              description: The JSON Web Token
            data:
              type: object
              properties:
                user:
                  type: string
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                available_roles:
                  type: array
                  items:
                    type: string
                    enum:
                      - user
                      - manager
                      - operator
                      - engineer
                      - root
                    description: >-
                      The requested role to assign after authentication.  Must
                      be one of: user, manager, operator, engineer, root.
                      Although root can only be assigned by the MRT identity
                      provider.
                highest_role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                provider:
                  type: string
              required:
                - role
                - highest_role
              additionalProperties: false
          additionalProperties: false
        mrt:
          type: object
          properties:
            jwt:
              type: string
              description: The JSON Web Token
            data:
              type: object
              properties:
                user:
                  type: string
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                available_roles:
                  type: array
                  items:
                    type: string
                    enum:
                      - user
                      - manager
                      - operator
                      - engineer
                      - root
                    description: >-
                      The requested role to assign after authentication.  Must
                      be one of: user, manager, operator, engineer, root.
                      Although root can only be assigned by the MRT identity
                      provider.
                highest_role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                provider:
                  type: string
              required:
                - role
                - highest_role
              additionalProperties: false
          additionalProperties: false
        ldap:
          type: object
          properties:
            jwt:
              type: string
              description: The JSON Web Token
            data:
              type: object
              properties:
                user:
                  type: string
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                highest_role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                provider:
                  type: string
              required:
                - role
                - highest_role
              additionalProperties: false
          additionalProperties: false
  securitySchemes:
    api_key:
      type: http
      scheme: basic
    jwt_bearer:
      type: http
      scheme: bearer
    jwt_cookie:
      type: apiKey
      in: cookie
      name: morio
paths:
  /ca/certificates:
    get:
      operationId: listCertificates
      tags:
        - anonymous
        - cryptography
      summary: List CA certificates
      description: >-
        Returns the root and intermediate certificates of the Morio CA, along
        with the root certificate's fingerprint.
      responses:
        '200':
          description: Certificate data
          content:
            application/json:
              example:
                root_fingerprint: >-
                  50a3270a0988610145659cfb190121d1fcfd50141b953a783f354d840ad3bf9e
                root_certificate: "-----BEGIN CERTIFICATE-----\r\nMIIGdDCCBFygAwIBAgIBATANBgkqhkiG9w0BAQsFADCBnzELMAkGA1UEBhMCQkUx\r\nETAPBgNVBAgTCEJydXNzZWxzMREwDwYDVQQHEwhCcnVzc2VsczEZMBcGA1UEChMQ\r\nRW5naW5lZXJpbmcgVGVhbTEkMCIGA1UECxMbTW9yaW8gU3RhbmRhbG9uZSBTd2Fy\r\nbSBUZXN0MSkwJwYDVQQDEyBNb3JpbyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0\r\neTAeFw0yNDA3MjgxMzE4MzZaFw00NDA3MjgxMzE4MzZaMIGfMQswCQYDVQQGEwJC\r\nRTERMA8GA1UECBMIQnJ1c3NlbHMxETAPBgNVBAcTCEJydXNzZWxzMRkwFwYDVQQK\r\nExBFbmdpbmVlcmluZyBUZWFtMSQwIgYDVQQLExtNb3JpbyBTdGFuZGFsb25lIFN3\r\nYXJtIFRlc3QxKTAnBgNVBAMTIE1vcmlvIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y\r\naXR5MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAkK3oHb9U0thYdq2F\r\niOtXhsxIp+omgEczcYL6fE5B+y2Qy7vzWvOr1l9kZTPN6FkYlo0idXWa4RO9SgQ9\r\nBoOqR+NaOvYRvn836l9ohGztvPAfxdxB+BGoHcd3KFgeD8veedKaCTgeVWNUQMUK\r\nHPR3q8HQXs1bycJ15j9ktmhtCKnZvFJUXZrOskgWdE+0pXI8rfrBdXB2z9WrN9dr\r\n32bxLfsB+JycO1OLs/dJpkIyj1+nbAzdW6KpiDMTq9DJSQgGKbgYoz73cD6uSbnh\r\n+sLhSvpUy7Kz5O+L5Ne+q4LNI4Dt5St4FGBljDWxV1Oar2MRyhwbdeIb4yunIpgY\r\nr/iD4+vCDSEiIxwcS9H8n5qyHbhMO8Nh9zUsGsomBcB+UlPbdB3I0M1veLB2Eb3t\r\nJ/qf7mzdN4yO2i5gP3irvF6BYM4Yb1NNvBKioyWYsQYAl+xOWI7vLXB/1IKs3Xux\r\nFnKa8lTuo1PORwS8g+pXUMX2Otc6Ucf0r58YoZrvAFUQRfdf9uk1jAKGXLkhrWva\r\no+ZUDrB9VnjNUrCr6DoTam7mDRIlgkCpDje/alW5gLh5++l2gcG4Eht1I9L/O+Ug\r\nJptJ3gyrWm8RknXFqT3LsPwRYFFewjxfS0bsww/5+O5A3TKu/PKyINazT5SRYNI4\r\noXOSebu0b9WHMkYVqrmxoTGgd/sCAwEAAaOBuDCBtTAMBgNVHRMEBTADAQH/MAsG\r\nA1UdDwQEAwIC9DA7BgNVHSUENDAyBggrBgEFBQcDAQYIKwYBBQUHAwIGCCsGAQUF\r\nBwMDBggrBgEFBQcDBAYIKwYBBQUHAwgwEQYJYIZIAYb4QgEBBAQDAgD3MB0GA1Ud\r\nDgQWBBRLAieUVRyHBPxbwRQ05LyL7xSvNTApBgNVHREEIjAggh5wb2MtbW9yaW8t\r\nbm9kZTEuY2VydC5ldXJvcGEuZXUwDQYJKoZIhvcNAQELBQADggIBAHfuhwc9awm+\r\nnZy7l8iviAoFqo3ja6yt/efx9KoQOCWP0q7TX7YAqWs8JQGV1DxFE94j3flgSxx5\r\nEeNs1p7qFHpJ1wGoWbTS8X/ytAVjKQEzfzSNSIEfK5O7G9rKWnpMjI6ZnuAbB7MU\r\nA1h6vrA2373qj7VFJfupj6qanZ8/WmhEU6dfwL1Mp4trwY7g40FfQOq8+YyqWyU0\r\nZdO7DUJd+bO8KGV6l7z8U9CyVN3X4hAvpHZ4rhD5Kabq0o6pA3GaQaSWPJfAxCNF\r\n1uWR3rLH2aK68pKAUrGNXRibyhrWIuX5t/WTub9zZw7FMk01YSFwXnl46MHFTt/r\r\nZWJVVITPCLjAHJaBH7WX8KXAORuE1Lqm9Ynapj0+B8c3nGC4Th+BiHorB3+CF799\r\nEpRjHsNXQWLRgP09gl1g/yp4GYbImUN2tjkyb7OftF/F/AEIozFGeXK0ewk+gZKt\r\nlYyqKzOjNbL7pDVh3NWQlGV9ky6rr2XWvYFzb3vFkH5MNWMHE5kCpjuAU/tOzmpG\r\n55TpUcT2BY4rTM8mObGNiPu4Vy9VqCaTy+mUlyRHlUZIBaZTxqNmjHrQXDj/B9s9\r\n0ekS8ikHr7A3mYdbZrCi0dEfQTs9seiWfid59I4W7R7/J0czJHusKkpM/GE5lFcg\r\noUyCyR375Emn80zazBRiKvAey+gT1bPD\r\n-----END CERTIFICATE-----\r\n"
                intermediate_certificate: "-----BEGIN CERTIFICATE-----\r\nMIIGfDCCBGSgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBnzELMAkGA1UEBhMCQkUx\r\nETAPBgNVBAgTCEJydXNzZWxzMREwDwYDVQQHEwhCcnVzc2VsczEZMBcGA1UEChMQ\r\nRW5naW5lZXJpbmcgVGVhbTEkMCIGA1UECxMbTW9yaW8gU3RhbmRhbG9uZSBTd2Fy\r\nbSBUZXN0MSkwJwYDVQQDEyBNb3JpbyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0\r\neTAeFw0yNDA3MjgxMzE4NDFaFw0yOTA3MjgxMzE4NDFaMIGnMQswCQYDVQQGEwJC\r\nRTERMA8GA1UECBMIQnJ1c3NlbHMxETAPBgNVBAcTCEJydXNzZWxzMRkwFwYDVQQK\r\nExBFbmdpbmVlcmluZyBUZWFtMSQwIgYDVQQLExtNb3JpbyBTdGFuZGFsb25lIFN3\r\nYXJtIFRlc3QxMTAvBgNVBAMTKE1vcmlvIEludGVybWVkaWF0ZSBDZXJ0aWZpY2F0\r\nZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDEbgzx\r\n0dF680J70HM+CwPDQM7owZf/nQnvHkxelrNOE1JE845kMbO+LC07WX8C1anizDJQ\r\npHiMzMWuCdziqUUSl19aAUfrP53ei3IvIC3R9mXusKLnrTEXauC7er1h2vsoz9F5\r\nmULW7Lsf/mdKu6MsXalJyDpWLBtZz3zznzoTd/rwKnFUnauy/rkTuwDqzRho1/89\r\n50sNdUgSQ14srXGxQmXyAeH9PZk3c40mLHmSYqJhP1H6O0t/snXbfO4s+5UDaTiF\r\n+3ANjeeJDUeDtXxg2hGiCPssrWeCGr331Jy4XU3nwaTGH7EmLep4IjE1+7qcOSl3\r\nkOWex7CmY991/PZSneHE0w4YAmudZTfHl7lA2RpVxFMkbIcbx7lMll/zfrvqax6W\r\nx7TIuqYoPwofr8hwxiKbxVCqW0UudxRrJXZLMlTavXIxVfEOmR7frfl/CmiyybwG\r\nzLqAsILof8azYWjqR+hwUKrj/UR05fiQfJmC8WGfGXWqM/YKUpIheG+FWs6jKHkm\r\nNcmANp+w6ucTbV++1vdhj8vLmjELFf9JRptSZxMQpUA2gVfF2Hbn+jyDQyhFSElk\r\n2K0KKQRHqMYRquRVZCHWZnaLyESh5bQGpt0q3+ZqlEfSM57h8eCmmd+ia1aVDeWU\r\nGlpe3mJPtNef9HBojkytvXqcQOOw0RDI6JBnuQIDAQABo4G4MIG1MAwGA1UdEwQF\r\nMAMBAf8wCwYDVR0PBAQDAgL0MDsGA1UdJQQ0MDIGCCsGAQUFBwMBBggrBgEFBQcD\r\nAgYIKwYBBQUHAwMGCCsGAQUFBwMEBggrBgEFBQcDCDARBglghkgBhvhCAQEEBAMC\r\nAPcwHQYDVR0OBBYEFEsCJ5RVHIcE/FvBFDTkvIvvFK81MCkGA1UdEQQiMCCCHnBv\r\nYy1tb3Jpby1ub2RlMS5jZXJ0LmV1cm9wYS5ldTANBgkqhkiG9w0BAQsFAAOCAgEA\r\nTN9kHQBILMqCQSpYINywlmnchGTsqzvisE9p3IzqDWNMuQybwAt6/3LetE1SomYc\r\nYmh2fS8MmAHs+xr7ZfldTSVBUMXj+R2p176d3AmToR4PQ2qFdLGT+JoMOk9qsMG6\r\nNyozmLKvT1TIAt2pwjGSfX0GLSy2RS+mUpxUHpaDKLozTk1YJZJnAzX9l6SJz+m/\r\n77XpmTxMTKCQY0WsKLtohlDAs9lrm9MAJir7XKbMyiHE0L4OiW1pgozxvPxeTBUz\r\ngEXz4laHvrbN/rRwzqdlZ1XFzgjuOT1Tfkn8fzbjqZVqs0muyTqsftkKUyi3rgY8\r\nH1RKqt4r+h86XSXTR3/M3Z7IZYQ9ts0qDhPyrya9S9V7ZPO7GWKcMIA2JhjAn5/0\r\nvcvrXFoE6bnXagxT6p+lUJqUycecpDgN4TFcRCTB/rvC7H6Qi7v7z3OU2kjYQp7n\r\nQjiAYmeXwoqB27hlBjKOpS3dgX34/HjhYJJ6JSZ5r89ZhSgQraIvNpf8HamrKtTz\r\nVsipAq4Ol2rkMwuiIRZGfE3eFppO4aWGs6nIwwrI00ttO241a8MVv95ruPFoULLS\r\nZJ3dD2kDgEZ3F9pDlJyty0T4PPNkwu35ysldWPXce9zy/7AFmxujMnd4bB+0tO0t\r\nDmghEeLnxtbFVX9qGQYM4a07Y7s7jFuIlXeZqMDxHgU=\r\n-----END CERTIFICATE-----\r\n"
          headers:
            ratelimit: &ref_0
              description: Rate limit details
              schema:
                type: string
            ratelimit-policy: &ref_1
              description: Rate limit policy details
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: &ref_3
                status: 401
                title: Authentication required
                detail: The request was not properly authenticated.
          headers: &ref_2
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: &ref_42
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: &ref_4
                status: 429
                title: Rate limit exceeded
                detail: You have made too many requests. Please try again later.
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: &ref_5
                status: 500
                title: Internal server error
                detail: >-
                  The request failed with an internal server error that we do
                  not know how to recover from.
        '503':
          description: Unable to load the requested data
          content:
            application/problem+json:
              example: &ref_6
                status: 503
                title: Unable to load the requested data
                detail: >-
                  We were unable to retrieve the requested data from the
                  internal state.
  /pubkey:
    get:
      operationId: getPubkey
      tags:
        - anonymous
        - cryptography
      summary: Get public key
      description: >-
        Returns Morio's internal public key. This can be used to validate
        Morio's JWTs
      responses:
        '200':
          description: Public Key
          content:
            application/json:
              example:
                pubkey: >
                  -----BEGIN PUBLIC KEY-----

                  MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA2w8z3zdnU8oAWYD8UfQ9

                  Ar3xVlEo2PIC4ZNZ7AYsXitFJ8NNdHvXqO5VIC3R2LHIsdn9wPkaaI5sAEcGNzeL

                  2AD4QzDCWIIYWfLLS1MTVVd9hW1HzHZxzvng4WJV3vuULCvYh+9bcy0xoKzq9OzE

                  jETDSFpsTEl3VGHE/J2XN/bh4I6qYvrze2ZAMtYfu1Xd7lk6tXooQO8WGaVdH/5/

                  R3HCoiFBTGJAa1VLlFp7Zuc2P4Gi7lbI1VAANCmN38olkyP2yrqPAtaFzAHZdmUZ

                  P+1BkJ7OQ2Z0uNKrpMiZZaweuaFGnmf1N3YsAJNwNvVksKWJJMilpNZbWQsm2QQj

                  U5i/MKSngXx7yyzATAxwH/JZrXYamNEdWFxFUdNaAleO3cSXQVxhqzcCb7JthlhG

                  n1DVvuM2kPGJJr8iSylXpX2Sge1Z9dnnrWpK+7/+mVTgYH+dlqZEHf7NC8cw7D/M

                  SN9phe5P6gCOppTqDNFi/3QsgdQ8w9kKhvD2d77I1pzTvjXqHxrFnZ/Je/8iOpa8

                  HnlRWso2II0Wn6BNOxNK5K/4TRFcOdVS+RbWaQ/+xuvX3/8GMeuOybwydqtIUXWs

                  ropJOuQ/yET5BtYVnalr4V9BfKmALfcYenIrk9sWLe3f+FG34kGF1egaWy2c4HFV

                  2zVgK4iWU+nnSlpFGcwAxVUCAwEAAQ==

                  -----END PUBLIC KEY-----
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
        '503':
          description: Unable to load the requested data
          content:
            application/problem+json:
              example: *ref_6
  /pubkey.pem:
    get:
      operationId: getPubkeyPem
      tags:
        - anonymous
        - cryptography
      summary: Get public key.pem
      description: >-
        Returns Morio's internal public key as a PEM file. This can be used to
        validate Morio's JWTs
      responses:
        '200':
          description: PublicKey.pem
          content:
            application/x-pem-file:
              example: |
                -----BEGIN PUBLIC KEY-----
                MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA2w8z3zdnU8oAWYD8UfQ9
                Ar3xVlEo2PIC4ZNZ7AYsXitFJ8NNdHvXqO5VIC3R2LHIsdn9wPkaaI5sAEcGNzeL
                2AD4QzDCWIIYWfLLS1MTVVd9hW1HzHZxzvng4WJV3vuULCvYh+9bcy0xoKzq9OzE
                jETDSFpsTEl3VGHE/J2XN/bh4I6qYvrze2ZAMtYfu1Xd7lk6tXooQO8WGaVdH/5/
                R3HCoiFBTGJAa1VLlFp7Zuc2P4Gi7lbI1VAANCmN38olkyP2yrqPAtaFzAHZdmUZ
                P+1BkJ7OQ2Z0uNKrpMiZZaweuaFGnmf1N3YsAJNwNvVksKWJJMilpNZbWQsm2QQj
                U5i/MKSngXx7yyzATAxwH/JZrXYamNEdWFxFUdNaAleO3cSXQVxhqzcCb7JthlhG
                n1DVvuM2kPGJJr8iSylXpX2Sge1Z9dnnrWpK+7/+mVTgYH+dlqZEHf7NC8cw7D/M
                SN9phe5P6gCOppTqDNFi/3QsgdQ8w9kKhvD2d77I1pzTvjXqHxrFnZ/Je/8iOpa8
                HnlRWso2II0Wn6BNOxNK5K/4TRFcOdVS+RbWaQ/+xuvX3/8GMeuOybwydqtIUXWs
                ropJOuQ/yET5BtYVnalr4V9BfKmALfcYenIrk9sWLe3f+FG34kGF1egaWy2c4HFV
                2zVgK4iWU+nnSlpFGcwAxVUCAwEAAQ==
                -----END PUBLIC KEY-----
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
        '503':
          description: Unable to load the requested data
          content:
            application/problem+json:
              example: *ref_6
  /downloads:
    get:
      tags: &ref_7
        - anonymous
      operationId: listDownloads
      summary: List downloads
      description: >-
        Returns a list of files in the download folder that can be downloaded
        from the API
      responses:
        '200':
          description: List of files
          content:
            application/json:
              example:
                - /downloads/certs
                - /downloads/certs/root.pem
                - /downloads/certs/intermediate.pem
                - /downloads/certs/db.pem
                - /downloads/certs/console.pem
                - /downloads/certs/broker.pem
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
        '503':
          description: Unable to load the requested data
          content:
            application/problem+json:
              example: *ref_6
  /idps:
    get:
      operationId: listIdps
      tags:
        - anonymous
        - authentication
      summary: List identity providers
      description: >-
        Returns information about the available identity providers (IDPs).
        Useful for frontend integration.
      responses:
        '200':
          description: List of IDPs
          content:
            application/json:
              example:
                idps:
                  apikey:
                    id: apikey
                    provider: apikey
                    label: API Key
                    about: false
                  mrt:
                    id: mrt
                    provider: mrt
                    about: false
                  local:
                    id: local
                    provider: local
                    label: Morio Account
                    about: false
                  ad:
                    id: ad
                    provider: ldap
                    label: Active Directory
                    about: Morio Tokyo branch on-prem Active Directory
                ui:
                  visibility:
                    mrt: icon
                    local: icon
                    apikey: icon
                  order:
                    - ad
                    - local
                    - apikey
                    - mrt
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
        '503':
          description: Unable to load the requested data
          content:
            application/problem+json:
              example: *ref_6
  /jwks:
    get:
      operationId: listJwks
      tags:
        - anonymous
        - authentication
      summary: List JWKS
      description: >-
        Returns information to verify the JSON Web Tokens (JWT) were issued by
        this Morio deployment. Useful for integration with exteral services. See
        [RFC 7517](https://datatracker.ietf.org/doc/html/rfc7517)
      responses:
        '200':
          description: JWKS data
          content:
            application/json:
              example:
                keys:
                  - kty: RSA
                    kid: YEKFMAkSJihz6zIBs6a-gQ9iEOxuljm_A3Xg6mkiAPY
                    'n': >-
                      yriNzCVnGQ56dyOVhoPn4J2xlq4_SW6YEoq2FAM1uXtY2FNg1nAtytdY7SKzyuSF1U5sOQ77RmACiXIX-tkuTTPl_kNZQ4udH-c2w01_So9uj9rjDSwvtilHOn4y-l9qYyqBM93jBnjWGFTBNpmDHO4ctVorI6zK1mE7ILDTEpz1lPiZUz22feLOSuCQfnGNJsoU5msSJCiOVtfi37yFQ-ZAQtcJGBe11xRkvjegQJv9UB67tnD3DkRt7FnNDWHJmIcPOyySHJ7CH_ajRZj6_S0BVdlTWNiarKGzTlRCpQCqVFaiu8g6H8ANSoWypIazoOA-iJ3n8VSgvxiVAX1vVzG_Z44Vd8JpEpOWeC36qfX2LNKg0KvUEgbdMt6NB4RUsXVgdIGT02h_RRVmTY5FZCcWtA6pqlJ9sd27f5t0IWAMLJLpUq6WjOVTidUxon7xVGLot26DP3S7KnVS1FHZFsUQn5uQ2kNbzWyr6gha3YbvYk1Ss6bRu9Zzv4mKXaXn-rASvuSHZClPo0k4wEfQ7kWRJgwNe9hbZRh_MGl4VbGhg0TbaPwqYucmffecjrhNEAPsjt5R7_Ukc4lg8y4miPn6QPsGBfNgiGfhdWLy_FXA-Nn2DJqsDJcieNJp0rOUDGRJSj64s8Y1dpOi14ZjErz3x9OZBHk1Nw1NAQ3Z96U
                    e: AQAB
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
        '503':
          description: Unable to load the requested data
          content:
            application/problem+json:
              example: *ref_6
  /limits:
    get:
      operationId: rateLimits
      tags:
        - anonymous
      summary: Get info on rate limits
      description: >-
        Returns information on your current rate limits. The API is rate-limited
        per IP address, this endpoint lets you see how many requests you have
        made within the rate limiting window, and how long before it will reset.
      responses:
        '200':
          description: Rate limiting data
          content:
            application/json:
              example:
                ip: 10.13.22.6
                hits: 6
                reset_time: '2024-09-12T09:37:49.723Z'
                reset_seconds: 899
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
        '503':
          description: Unable to load the requested data
          content:
            application/problem+json:
              example: *ref_6
  /status:
    get:
      operationId: getStatus
      tags: *ref_7
      summary: Get status
      description: Returns information about how Morio is doing. Useful for monitoring.
      responses:
        '200':
          description: Morio Status
          content:
            application/json:
              example:
                info:
                  about: Morio Management API
                  name: '@morio/api'
                  production: false
                  version: 0.2.0
                state:
                  ephemeral: false
                  uptime: 37
                  start_time: 1722232994724
                  reload_count: 1
                  config_resolved: true
                  settings_serial: 1722172709838
                core:
                  info:
                    about: Morio Core
                    name: '@morio/core'
                    production: false
                    version: 0.2.0
                  status:
                    cluster:
                      code: 0
                      color: green
                      time: 1722233017641
                      updated: 1722233017641
                      leader_serial: 1
                      leading: true
                      msg: Everything is ok
                    nodes:
                      morio-node1.tokyo.morio.it:
                        api: 0
                        broker: 0
                        db: 0
                        ca: 0
                        proxy: 0
                        ui: 0
                        console: 0
                  nodes:
                    39b0b5fd-6648-41f8-b3b9-df96c5d11579:
                      fqdn: morio-node1.tokyo.morio.it
                      hostname: poc-morio-node1
                      ip: 10.123.12.15
                      serial: 1
                      uuid: 39b0b5fd-6648-41f8-b3b9-df96c5d11579
                      settings: 1722172709838
                  node:
                    uptime: 46633
                    cluster: 8602906f-5437-4cce-b150-7c3387da36fa
                    node: 39b0b5fd-6648-41f8-b3b9-df96c5d11579
                    node_serial: 1
                    ephemeral: false
                    reconfigure_count: 1
                    config_resolved: true
                    settings_serial: 1722172709838
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
        '503':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                Unable to load status data from Morio Core:
                  value:
                    status: 503
                    title: Unable to load status data from Morio Core
                    detail: >-
                      When reaching out to Morio Core, we received a status code
                      503.
                Unable to load the requested data:
                  value: *ref_6
  /up:
    get:
      operationId: upHealthcheck
      tags: *ref_7
      summary: API Healthcheck
      description: >-
        Returns status code 204 if the API is up. No response body or data is
        returned. Useful for a quick healhcheck.
      responses:
        '204':
          description: No response body
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /validate/settings:
    post:
      operationId: validateSettings
      tags:
        - anonymous
        - settings
      summary: Validate settings
      description: Will validate settings so you can deploy them with confidence.
      requestBody:
        description: The Morio settings you want to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cluster:
                  type: object
                  properties:
                    name:
                      type: string
                      pattern: ^[A-Za-z0-9\s-_,.;:()]+$
                      minLength: 2
                      maxLength: 255
                    broker_nodes:
                      type: array
                      items:
                        type: string
                      minItems: 1
                      maxItems: 9
                    flanking_nodes:
                      type: array
                      items:
                        type: string
                      minItems: 0
                      maxItems: 36
                    fqdn:
                      type: string
                      oneOf:
                        - {}
                        - x-required: true
                  required:
                    - name
                    - broker_nodes
                  additionalProperties: false
                metadata:
                  type: object
                  properties:
                    comment:
                      anyOf:
                        - type: string
                        - type: array
                          items:
                            type: string
                    version:
                      anyOf:
                        - type: string
                        - type: number
                          format: float
                  additionalProperties: false
                connector:
                  type: object
                  properties: {}
                  additionalProperties: false
                tokens:
                  type: object
                  properties:
                    flags:
                      type: object
                      properties:
                        HEADLESS_MORIO:
                          type: boolean
                        DISABLE_ROOT_TOKEN:
                          type: boolean
                        DISABLE_IDP_APIKEY:
                          type: boolean
                        DISABLE_IDP_LDAP:
                          type: boolean
                        DISABLE_IDP_LOCAL:
                          type: boolean
                        DISABLE_IDP_MRT:
                          type: boolean
                      additionalProperties: false
                    secrets:
                      type: object
                      properties: {}
                      additionalProperties: false
                    vars:
                      type: object
                      properties: {}
                      additionalProperties: false
                  additionalProperties: false
                iam:
                  type: object
                  properties:
                    providers:
                      type: object
                      properties: {}
                      additionalProperties: false
                    ui:
                      type: object
                      properties:
                        visibility:
                          type: object
                          properties: {}
                          additionalProperties: false
                        order:
                          type: array
                          items: {}
                      additionalProperties: false
                  additionalProperties: false
                vault:
                  type: object
                  properties:
                    url:
                      type: string
                    verify_certificate:
                      type: boolean
                    role:
                      type: string
                    jwt_auth_path:
                      type: string
                    kv_path:
                      type: string
                  required:
                    - url
                  additionalProperties: false
                preseed:
                  anyOf:
                    - type: object
                      properties:
                        url:
                          type: string
                        git:
                          type: object
                          properties: {}
                          additionalProperties:
                            type: object
                            properties:
                              id:
                                type: string
                              url:
                                type: string
                              ref:
                                type: string
                              user:
                                anyOf:
                                  - type: string
                                  - type: object
                                    properties:
                                      vault:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              path:
                                                type: string
                                              key:
                                                type: string
                                              instance:
                                                type: string
                                            required:
                                              - path
                                              - key
                                            additionalProperties: false
                                    additionalProperties: false
                              token:
                                anyOf:
                                  - type: string
                                  - type: object
                                    properties:
                                      vault:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              path:
                                                type: string
                                              key:
                                                type: string
                                              instance:
                                                type: string
                                            required:
                                              - path
                                              - key
                                            additionalProperties: false
                                    additionalProperties: false
                            additionalProperties: false
                        base:
                          anyOf:
                            - type: object
                              properties:
                                url:
                                  type: string
                                headers:
                                  type: object
                                  properties: {}
                                  additionalProperties: false
                              required:
                                - url
                              additionalProperties: false
                            - type: object
                              properties:
                                gitlab:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    project_id:
                                      type: number
                                      format: float
                                    file_path:
                                      type: string
                                    ref:
                                      type: string
                                    token:
                                      anyOf:
                                        - type: string
                                        - type: object
                                          properties:
                                            vault:
                                              anyOf:
                                                - type: string
                                                - type: object
                                                  properties:
                                                    path:
                                                      type: string
                                                    key:
                                                      type: string
                                                    instance:
                                                      type: string
                                                  required:
                                                    - path
                                                    - key
                                                  additionalProperties: false
                                          additionalProperties: false
                                  required:
                                    - url
                                    - project_id
                                    - file_path
                                    - token
                                  additionalProperties: false
                              additionalProperties: false
                            - type: object
                              properties:
                                github:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    owner:
                                      type: string
                                    repo:
                                      type: string
                                    file_path:
                                      type: string
                                    ref:
                                      type: string
                                    token:
                                      anyOf:
                                        - type: string
                                        - type: object
                                          properties:
                                            vault:
                                              anyOf:
                                                - type: string
                                                - type: object
                                                  properties:
                                                    path:
                                                      type: string
                                                    key:
                                                      type: string
                                                    instance:
                                                      type: string
                                                  required:
                                                    - path
                                                    - key
                                                  additionalProperties: false
                                          additionalProperties: false
                                  required:
                                    - owner
                                    - repo
                                    - file_path
                                    - token
                                  additionalProperties: false
                              additionalProperties: false
                            - type: string
                        overlays:
                          anyOf:
                            - type: array
                              items:
                                anyOf:
                                  - type: object
                                    properties:
                                      url:
                                        type: string
                                      headers:
                                        type: object
                                        properties: {}
                                        additionalProperties: false
                                    required:
                                      - url
                                    additionalProperties: false
                                  - type: object
                                    properties:
                                      gitlab:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          project_id:
                                            type: number
                                            format: float
                                          file_path:
                                            type: string
                                          ref:
                                            type: string
                                          token:
                                            anyOf:
                                              - type: string
                                              - type: object
                                                properties:
                                                  vault:
                                                    anyOf:
                                                      - type: string
                                                      - type: object
                                                        properties:
                                                          path:
                                                            type: string
                                                          key:
                                                            type: string
                                                          instance:
                                                            type: string
                                                        required:
                                                          - path
                                                          - key
                                                        additionalProperties: false
                                                additionalProperties: false
                                        required:
                                          - url
                                          - project_id
                                          - file_path
                                          - token
                                        additionalProperties: false
                                    additionalProperties: false
                                  - type: object
                                    properties:
                                      github:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          owner:
                                            type: string
                                          repo:
                                            type: string
                                          file_path:
                                            type: string
                                          ref:
                                            type: string
                                          token:
                                            anyOf:
                                              - type: string
                                              - type: object
                                                properties:
                                                  vault:
                                                    anyOf:
                                                      - type: string
                                                      - type: object
                                                        properties:
                                                          path:
                                                            type: string
                                                          key:
                                                            type: string
                                                          instance:
                                                            type: string
                                                        required:
                                                          - path
                                                          - key
                                                        additionalProperties: false
                                                additionalProperties: false
                                        required:
                                          - owner
                                          - repo
                                          - file_path
                                          - token
                                        additionalProperties: false
                                    additionalProperties: false
                                  - type: string
                            - type: string
                      additionalProperties: false
                    - type: string
              additionalProperties: false
            example: &ref_8
              name: Morio Standalone Example
              broker_nodes:
                - morio-node1.tokyo.morio.it
              tokens: &ref_35
                flags:
                  HEADLESS_MORIO: false
                  DISABLE_ROOT_TOKEN: false
                secrets:
                  AD_PASSWORD: aa;S009)) _S asd0AS
              iam: &ref_36
                providers:
                  apikey:
                    provider: apikey
                    id: apikey
                    label: API Key
                  mrt: {}
                  local:
                    provider: local
                    id: local
                    label: Morio Account
                  ad:
                    provider: ldap
                    id: ad
                    about: Morio Tokyo branch on-prem Active Directory
                    server:
                      url: ldaps://dc1.tokyo.morio.it
                      bindDN: CN=morio-ldap,OU=Users,DC=tokyo,DC=morio,DC=it
                      bindCredentials: '{{{ AD_PASSWORD }}}'
                      searchBase: OU=Users-EU,DC=tokyo,DC=morio,DC=it
                      searchFilter: (&(objectClass=user)(samaccountname={{username}}))
                    username_field: samaccountname
                    label: Active Directory
                    rbac:
                      user:
                        attribute: samaccountname
                        regex: .
                      root:
                        attribute: samaccountname
                        regex: ^(?:joostdecock|sorchanidhubhghaill)$
                    verify_certificate: true
              ui: &ref_37
                visibility:
                  mrt: icon
                  local: icon
                  apikey: icon
                order:
                  - ad
                  - local
                  - apikey
                  - mrt
      responses:
        '200':
          description: Validation report
          content:
            application/json:
              example: &ref_9
                valid: true
                deployable: false
                errors: []
                warnings:
                  - >-
                    Node 1 runs Morio, but is not in ephemeral mode, its
                    settings would be overwritten
                info:
                  - Settings passed schema validation
                  - 'Validating node 1: morio-node1.tokyo.morio.it'
                  - 'Node 1 resolves to: 10.123.12.15'
                  - Node 1 is reachable over HTTPS
                validated_settings: *ref_8
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: &ref_10
                status: 400
                title: This request violates the data schema
                detail: >-
                  The request data failed validation against the Morio data
                  schema. This means the request is invalid.
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /validate/preseed:
    post:
      operationId: validatePreseedSettings
      tags:
        - anonymous
        - settings
      summary: Validate preseed settings
      description: Will validate preseed settings so you can deploy them with confidence.
      requestBody:
        description: The Morio preseed settings you want to validate
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - type: object
                  properties:
                    url:
                      type: string
                    git:
                      type: object
                      properties: {}
                      additionalProperties:
                        type: object
                        properties:
                          id:
                            type: string
                          url:
                            type: string
                          ref:
                            type: string
                          user:
                            anyOf:
                              - type: string
                              - type: object
                                properties:
                                  vault:
                                    anyOf:
                                      - type: string
                                      - type: object
                                        properties:
                                          path:
                                            type: string
                                          key:
                                            type: string
                                          instance:
                                            type: string
                                        required:
                                          - path
                                          - key
                                        additionalProperties: false
                                additionalProperties: false
                          token:
                            anyOf:
                              - type: string
                              - type: object
                                properties:
                                  vault:
                                    anyOf:
                                      - type: string
                                      - type: object
                                        properties:
                                          path:
                                            type: string
                                          key:
                                            type: string
                                          instance:
                                            type: string
                                        required:
                                          - path
                                          - key
                                        additionalProperties: false
                                additionalProperties: false
                        additionalProperties: false
                    base:
                      anyOf:
                        - type: object
                          properties:
                            url:
                              type: string
                            headers:
                              type: object
                              properties: {}
                              additionalProperties: false
                          required:
                            - url
                          additionalProperties: false
                        - type: object
                          properties:
                            gitlab:
                              type: object
                              properties:
                                url:
                                  type: string
                                project_id:
                                  type: number
                                  format: float
                                file_path:
                                  type: string
                                ref:
                                  type: string
                                token:
                                  anyOf:
                                    - type: string
                                    - type: object
                                      properties:
                                        vault:
                                          anyOf:
                                            - type: string
                                            - type: object
                                              properties:
                                                path:
                                                  type: string
                                                key:
                                                  type: string
                                                instance:
                                                  type: string
                                              required:
                                                - path
                                                - key
                                              additionalProperties: false
                                      additionalProperties: false
                              required:
                                - url
                                - project_id
                                - file_path
                                - token
                              additionalProperties: false
                          additionalProperties: false
                        - type: object
                          properties:
                            github:
                              type: object
                              properties:
                                url:
                                  type: string
                                owner:
                                  type: string
                                repo:
                                  type: string
                                file_path:
                                  type: string
                                ref:
                                  type: string
                                token:
                                  anyOf:
                                    - type: string
                                    - type: object
                                      properties:
                                        vault:
                                          anyOf:
                                            - type: string
                                            - type: object
                                              properties:
                                                path:
                                                  type: string
                                                key:
                                                  type: string
                                                instance:
                                                  type: string
                                              required:
                                                - path
                                                - key
                                              additionalProperties: false
                                      additionalProperties: false
                              required:
                                - owner
                                - repo
                                - file_path
                                - token
                              additionalProperties: false
                          additionalProperties: false
                        - type: string
                    overlays:
                      anyOf:
                        - type: array
                          items:
                            anyOf:
                              - type: object
                                properties:
                                  url:
                                    type: string
                                  headers:
                                    type: object
                                    properties: {}
                                    additionalProperties: false
                                required:
                                  - url
                                additionalProperties: false
                              - type: object
                                properties:
                                  gitlab:
                                    type: object
                                    properties:
                                      url:
                                        type: string
                                      project_id:
                                        type: number
                                        format: float
                                      file_path:
                                        type: string
                                      ref:
                                        type: string
                                      token:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              vault:
                                                anyOf:
                                                  - type: string
                                                  - type: object
                                                    properties:
                                                      path:
                                                        type: string
                                                      key:
                                                        type: string
                                                      instance:
                                                        type: string
                                                    required:
                                                      - path
                                                      - key
                                                    additionalProperties: false
                                            additionalProperties: false
                                    required:
                                      - url
                                      - project_id
                                      - file_path
                                      - token
                                    additionalProperties: false
                                additionalProperties: false
                              - type: object
                                properties:
                                  github:
                                    type: object
                                    properties:
                                      url:
                                        type: string
                                      owner:
                                        type: string
                                      repo:
                                        type: string
                                      file_path:
                                        type: string
                                      ref:
                                        type: string
                                      token:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              vault:
                                                anyOf:
                                                  - type: string
                                                  - type: object
                                                    properties:
                                                      path:
                                                        type: string
                                                      key:
                                                        type: string
                                                      instance:
                                                        type: string
                                                    required:
                                                      - path
                                                      - key
                                                    additionalProperties: false
                                            additionalProperties: false
                                    required:
                                      - owner
                                      - repo
                                      - file_path
                                      - token
                                    additionalProperties: false
                                additionalProperties: false
                              - type: string
                        - type: string
                  additionalProperties: false
                - type: string
            example:
              base: &ref_38
                github:
                  owner: morio
                  repo: preseed
                  file_path: settings/standalone.yaml
                  ref: main
                  token: >-
                    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
              overlays: &ref_39
                - settings/overlays/idp-ad.yaml
                - settings/overlays/idp-apikey.yaml
                - settings/overlays/idp-local.yaml
                - settings/overlays/idp-mrt.yaml
      responses:
        '200':
          description: Validation report
          content:
            application/json:
              example: *ref_9
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /accounts:
    get:
      tags: &ref_11
        - accounts
      security: &ref_16
        - api_key: []
        - jwt_bearer: []
        - jwt_cookie: []
      operationId: listAccounts
      summary: List local accounts
      description: >-
        Returns the list of accounts. Needs at least the `manager` role.



        - When using the endpoint with the `manager` role, the list will include
        all accounts created by the current user.

        - When using the endpoint with a higher role (`operator`, `engineer`, or
        even `root`), the list will include all accounts.
      responses:
        '200':
          description: Account list
          content:
            application/json:
              example:
                - id: local.testaccount1722178139692
                  about: This account was created as part of a test
                  status: active
                  role: user
                  created_by: local.test_user
                  created_at: '1722178140015'
                  updated_by: null
                  updated_at: null
                  last_login: null
                  provider: local
                  username: testaccount1722178139692
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    about:
                      type: string
                    status:
                      type: string
                      enum:
                        - pending
                        - active
                        - disabled
                    role:
                      type: string
                      enum:
                        - user
                        - manager
                        - operator
                        - engineer
                        - root
                      description: >-
                        The requested role to assign after authentication.  Must
                        be one of: user, manager, operator, engineer, root.
                        Although root can only be assigned by the MRT identity
                        provider.
                    created_by:
                      type: string
                    created_at:
                      type: string
                      format: date-time
                    updated_by:
                      type: string
                    updated_at:
                      type: string
                      format: date-time
                    last_login:
                      type: string
                      format: date-time
                    provider:
                      type: string
                    username:
                      type: string
                  required:
                    - id
                    - role
                  additionalProperties: false
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: &ref_12
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /account:
    post:
      tags: *ref_11
      operationId: createLocalAccount
      summary: Create local account
      description: >-
        Creates a local Morio account. The account needs to be activated via the
        invite code/url.
      requestBody:
        description: The Morio settings you want to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                about:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: A description or nmemonic note for the acount
                provider:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The ID of the identity provider to use for this account
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: >-
                    The requested role to assign after authentication.  Must be
                    one of: user, manager, operator, engineer, root. Although
                    root can only be assigned by the MRT identity provider.
                username:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The username of the account
                overwrite:
                  type: boolean
                  description: >-
                    Whether to overwrite the account, if one has a sufficiently
                    high role
              required:
                - provider
                - role
                - username
              additionalProperties: false
            example:
              username: testAccount1722234021332
              about: This account was created as part of a test
              provider: local
              role: user
      responses:
        '200':
          description: Account details
          content:
            application/json:
              example:
                username: testAccount1722068362387
                about: This account was created as part of a test
                provider: local
                role: user
                invite: e7d7b6427378f9ddde77775160ac91dda8eea6c5ef0491c8
                inviteUrl: >-
                  https://unit.test.morio.it/morio/invite/testAccount1722068362387-e7d7b6427378f9ddde77775160ac91dda8eea6c5ef0491c8
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_12
        '400':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                This request violates the data schema:
                  value: *ref_10
                Account state is invalid:
                  value: &ref_13
                    status: 400
                    title: Account state is invalid
                    detail: >-
                      The account is in a state that does not allow the current
                      action.
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Conflict with an existing account
          content:
            application/problem+json:
              example: &ref_23
                status: 409
                title: Conflict with an existing account
                detail: The provided data conflicts with an existing account.
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /activate-account:
    post:
      tags: *ref_11
      operationId: activateLocalAccount
      summary: Activate local account
      description: >-
        Activates an account based on its invite code.


        Note that for local Morio accounts, the account will still need to
        activate MFA before it can be used.

        That is because MFA is manadatory for local Morio accounts.


        So for a local Morio account, this endpoint will return the secret to
        setup MFA, as well as (an SVG of) the QR-code to do so.
      requestBody:
        description: The invite code, as well as username and (identity) provider
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                invite:
                  type: string
                  minLength: 48
                  maxLength: 48
                  description: The account invite code
                provider:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The ID of the identity provider to use for this account
                username:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The username of the account
              required:
                - invite
                - provider
                - username
              additionalProperties: false
            example:
              username: testAccount1722234284869
              invite: 251bdac3a4ffadaef194cdc18b97be9a0f9951ce65a10ae1
              provider: local
      responses:
        '200':
          description: MFA secret and QR code
          content:
            application/json:
              example:
                secret: AULGYK3RINCS62ZM
                otpauth: >-
                  otpauth://totp/Morio%2FMorio%20Standalone%20Swarm%20Test:testAccount1722180213478?secret=AULGYK3RINCS62ZM&period=30&digits=6&algorithm=SHA1&issuer=Morio%2FMorio%20Standalone%20Swarm%20Test
                qrcode: >
                  <svg class="qrcode" width="100%" height="100%"
                  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 65"
                  shape-rendering="crispEdges"><path fill="none" d="M0
                  0h65v65H0z"/><path stroke="currentColor" d="M4 4.5h7m1 0h2m3
                  0h1m5 0h1m1 0h2m1 0h5m1 0h6m1 0h2m1 0h1m1 0h2m2 0h2m2 0h7M4
                  5.5h1m5 0h1m1 0h2m1 0h1m1 0h1m1 0h1m2 0h1m1 0h3m5 0h5m2 0h2m1
                  0h1m2 0h1m1 0h1m3 0h1m2 0h1m5 0h1M4 6.5h1m1 0h3m1 0h1m1 0h3m1
                  0h4m2 0h1m1 0h4m3 0h1m1 0h3m3 0h2m1 0h2m2 0h6m2 0h1m1 0h3m1
                  0h1M4 7.5h1m1 0h3m1 0h1m3 0h3m7 0h1m5 0h6m4 0h2m1 0h1m2 0h1m1
                  0h1m2 0h1m2 0h1m1 0h3m1 0h1M4 8.5h1m1 0h3m1 0h1m1 0h1m1 0h1m1
                  0h1m3 0h1m1 0h1m2 0h2m1 0h7m4 0h2m1 0h1m2 0h2m1 0h2m1 0h1m2
                  0h1m1 0h3m1 0h1M4 9.5h1m5 0h1m2 0h5m1 0h4m2 0h1m1 0h1m1 0h2m3
                  0h3m1 0h1m1 0h1m1 0h2m1 0h2m3 0h1m3 0h1m5 0h1M4 10.5h7m1 0h1m1
                  0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1
                  0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1 0h1m1
                  0h7M13 11.5h2m1 0h1m2 0h1m1 0h1m1 0h1m2 0h1m1 0h3m3 0h3m2
                  0h1m1 0h2m2 0h8M4 12.5h1m2 0h6m1 0h4m1 0h2m3 0h1m4 0h7m2 0h3m1
                  0h1m1 0h2m1 0h1m5 0h1m2 0h1m1 0h3M7 13.5h2m3 0h1m4 0h1m2 0h1m1
                  0h2m2 0h4m3 0h2m3 0h2m1 0h2m5 0h1m1 0h1m1 0h1m1 0h4m1 0h1M4
                  14.5h1m2 0h2m1 0h1m3 0h1m4 0h1m1 0h2m1 0h2m1 0h1m2 0h1m1 0h1m1
                  0h3m7 0h2m2 0h3m1 0h1m1 0h3m1 0h1m1 0h1M5 15.5h3m5 0h1m2 0h1m1
                  0h2m2 0h1m2 0h2m3 0h1m1 0h1m3 0h1m1 0h5m7 0h1m2 0h2m1 0h3m1
                  0h1M7 16.5h2m1 0h2m1 0h3m1 0h1m1 0h1m1 0h2m1 0h3m1 0h3m2 0h1m1
                  0h3m4 0h1m1 0h2m2 0h6m1 0h3m1 0h2M5 17.5h1m2 0h2m2 0h1m1 0h1m2
                  0h2m1 0h3m2 0h1m2 0h3m1 0h1m3 0h2m3 0h3m1 0h1m1 0h1m1 0h1m2
                  0h1m1 0h1m1 0h2m1 0h1M4 18.5h1m3 0h1m1 0h1m1 0h6m4 0h2m2 0h3m5
                  0h1m1 0h2m1 0h1m1 0h4m1 0h1m1 0h1m1 0h4m3 0h2M4 19.5h1m2 0h2m2
                  0h6m1 0h1m1 0h1m4 0h1m2 0h1m1 0h1m1 0h1m2 0h2m1 0h1m2 0h2m2
                  0h1m2 0h4m1 0h3m2 0h1m1 0h1M4 20.5h2m1 0h1m2 0h1m1 0h5m2 0h4m2
                  0h1m1 0h4m1 0h2m1 0h3m4 0h1m10 0h2m2 0h4M4 21.5h2m2 0h2m1
                  0h1m1 0h2m3 0h6m1 0h1m3 0h1m1 0h2m1 0h1m3 0h1m1 0h1m1 0h3m1
                  0h1m1 0h1m1 0h4m1 0h2m1 0h1M6 22.5h1m3 0h2m1 0h2m2 0h2m3 0h1m5
                  0h3m2 0h1m1 0h4m2 0h1m1 0h1m1 0h3m2 0h2m3 0h3m2 0h1M6 23.5h1m4
                  0h1m2 0h4m3 0h1m2 0h1m2 0h1m2 0h1m3 0h1m2 0h1m7 0h2m2 0h2m1
                  0h5m1 0h2M4 24.5h1m2 0h1m1 0h2m4 0h3m2 0h3m1 0h1m1 0h1m2 0h2m2
                  0h3m1 0h6m3 0h2m1 0h1m3 0h2m1 0h1m1 0h1M5 25.5h4m2 0h1m2 0h3m3
                  0h1m1 0h1m3 0h2m1 0h1m4 0h1m2 0h1m3 0h1m3 0h2m1 0h3m1 0h6m2
                  0h1M8 26.5h3m1 0h1m5 0h1m1 0h1m1 0h3m1 0h1m1 0h2m4 0h1m1 0h2m2
                  0h1m1 0h1m1 0h2m1 0h5m3 0h1M4 27.5h3m2 0h1m2 0h4m4 0h1m2 0h1m1
                  0h1m3 0h1m2 0h4m1 0h1m3 0h1m3 0h1m1 0h2m2 0h1m1 0h2m3 0h1m1
                  0h1M4 28.5h2m2 0h1m1 0h2m1 0h2m3 0h3m1 0h1m2 0h2m4 0h2m2 0h2m1
                  0h1m1 0h1m1 0h4m2 0h2m1 0h3m1 0h2M5 29.5h1m1 0h3m1 0h1m1 0h2m2
                  0h1m3 0h2m1 0h5m4 0h2m1 0h1m4 0h3m1 0h4m1 0h5m3 0h1M5 30.5h8m1
                  0h2m1 0h1m1 0h1m2 0h1m1 0h1m1 0h2m1 0h7m1 0h1m1 0h1m2 0h1m6
                  0h2m1 0h5m1 0h2M6 31.5h1m1 0h1m3 0h1m1 0h3m1 0h1m3 0h2m2 0h1m1
                  0h1m1 0h1m3 0h1m1 0h2m4 0h1m5 0h2m1 0h2m3 0h3m1 0h1M4 32.5h1m1
                  0h1m1 0h1m1 0h1m1 0h1m3 0h4m2 0h3m1 0h2m2 0h1m1 0h1m1 0h5m1
                  0h2m1 0h2m1 0h1m3 0h1m1 0h1m1 0h1m1 0h1m1 0h3M4 33.5h1m2 0h2m3
                  0h6m1 0h5m2 0h1m1 0h1m1 0h1m3 0h1m1 0h2m2 0h2m2 0h2m2 0h5m3
                  0h5M4 34.5h1m1 0h1m1 0h5m1 0h1m2 0h1m4 0h2m1 0h2m3 0h5m1 0h3m2
                  0h1m3 0h1m5 0h10M4 35.5h1m7 0h4m1 0h4m1 0h1m1 0h4m2 0h1m2
                  0h1m1 0h1m2 0h3m5 0h2m1 0h1m3 0h4m1 0h1m1 0h1M4 36.5h2m3 0h8m2
                  0h1m2 0h3m1 0h1m1 0h4m4 0h1m1 0h1m1 0h1m3 0h12M4 37.5h2m2
                  0h1m2 0h4m2 0h2m2 0h1m1 0h1m2 0h2m2 0h4m2 0h6m2 0h1m1 0h1m1
                  0h3m3 0h4m2 0h1M6 38.5h3m1 0h2m1 0h1m3 0h1m1 0h1m1 0h2m4 0h1m1
                  0h2m2 0h1m1 0h1m1 0h4m5 0h2m1 0h4m1 0h3m1 0h3M7 39.5h1m1 0h1m1
                  0h1m5 0h4m1 0h4m3 0h1m2 0h3m1 0h2m1 0h1m1 0h1m5 0h3m1 0h1m2
                  0h1m2 0h1M4 40.5h2m2 0h1m1 0h1m2 0h1m1 0h2m1 0h1m1 0h2m2 0h2m1
                  0h1m4 0h1m2 0h1m2 0h2m1 0h1m2 0h1m1 0h1m1 0h5m3 0h2m1 0h2M4
                  41.5h4m1 0h1m2 0h2m2 0h1m7 0h2m1 0h1m2 0h1m5 0h1m2 0h2m1 0h1m1
                  0h5m5 0h1m4 0h1M5 42.5h1m3 0h3m1 0h3m1 0h1m2 0h1m3 0h1m2 0h4m1
                  0h3m1 0h2m3 0h1m1 0h2m3 0h1m1 0h1m2 0h4m2 0h2M4 43.5h1m2 0h3m1
                  0h2m3 0h1m1 0h4m5 0h1m2 0h1m1 0h1m2 0h1m1 0h1m4 0h6m1 0h1m1
                  0h2m4 0h2m1 0h1M4 44.5h2m1 0h4m1 0h1m2 0h1m1 0h1m1 0h2m2 0h2m2
                  0h1m2 0h3m3 0h2m1 0h1m1 0h3m2 0h6m1 0h5m1 0h2M5 45.5h1m1 0h1m3
                  0h2m3 0h1m6 0h1m6 0h1m1 0h2m1 0h1m7 0h2m1 0h6m3 0h2m1 0h1m1
                  0h1M4 46.5h1m4 0h3m2 0h4m6 0h1m1 0h3m2 0h3m2 0h3m1 0h1m1 0h3m2
                  0h3m1 0h1m2 0h1m2 0h4M4 47.5h2m1 0h3m1 0h3m2 0h3m2 0h5m1 0h1m1
                  0h4m1 0h5m2 0h2m2 0h2m2 0h5m1 0h1m1 0h2m1 0h1M4 48.5h1m4 0h2m3
                  0h2m3 0h2m1 0h3m6 0h1m1 0h1m2 0h1m1 0h5m1 0h1m1 0h1m2 0h2m1
                  0h1m1 0h2m1 0h1m2 0h1M4 49.5h5m2 0h1m2 0h3m2 0h1m4 0h1m1 0h3m8
                  0h1m1 0h4m2 0h1m1 0h1m4 0h5m1 0h2M4 50.5h1m1 0h1m2 0h4m4 0h1m1
                  0h2m2 0h2m3 0h2m2 0h1m2 0h1m1 0h2m1 0h1m1 0h1m1 0h4m1 0h2m1
                  0h1m1 0h2m3 0h2M4 51.5h5m3 0h2m3 0h1m4 0h1m1 0h1m1 0h1m1 0h2m1
                  0h4m1 0h1m1 0h5m1 0h1m3 0h3m1 0h1m1 0h1m1 0h1m1 0h2M10
                  52.5h1m3 0h3m1 0h2m2 0h3m2 0h1m2 0h6m2 0h1m1 0h1m2 0h2m1 0h1m1
                  0h3m1 0h5m3 0h1M12 53.5h3m1 0h1m2 0h1m1 0h1m2 0h2m1 0h4m3
                  0h3m5 0h1m1 0h2m1 0h1m1 0h1m2 0h1m3 0h1m1 0h2M4 54.5h7m1 0h3m1
                  0h2m4 0h1m3 0h1m1 0h1m1 0h1m1 0h1m1 0h1m3 0h3m1 0h1m5 0h2m2
                  0h1m1 0h1m1 0h1m1 0h2M4 55.5h1m5 0h1m1 0h2m1 0h3m1 0h1m5 0h1m1
                  0h1m1 0h2m3 0h1m2 0h1m2 0h2m1 0h1m1 0h1m3 0h4m3 0h5M4 56.5h1m1
                  0h3m1 0h1m1 0h4m1 0h2m2 0h1m2 0h1m1 0h1m1 0h1m1 0h5m1 0h1m1
                  0h1m3 0h1m2 0h1m5 0h6m2 0h2M4 57.5h1m1 0h3m1 0h1m1 0h1m2 0h1m1
                  0h1m1 0h2m1 0h2m2 0h3m3 0h1m1 0h2m2 0h2m2 0h2m4 0h4m1 0h2m3
                  0h1M4 58.5h1m1 0h3m1 0h1m2 0h3m1 0h1m1 0h1m1 0h1m6 0h1m2 0h4m2
                  0h1m3 0h6m4 0h3m5 0h2M4 59.5h1m5 0h1m3 0h4m3 0h1m1 0h3m2 0h1m1
                  0h1m2 0h4m1 0h1m1 0h2m1 0h3m1 0h2m4 0h2m1 0h1m2 0h2M4 60.5h7m1
                  0h4m1 0h3m2 0h1m3 0h1m1 0h3m1 0h1m2 0h1m3 0h1m1 0h1m2 0h2m1
                  0h1m2 0h3"/></svg>
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                This request violates the data schema:
                  value: *ref_10
                Account state is invalid:
                  value: *ref_13
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Denied by role-base access control
          content:
            application/problem+json:
              example: &ref_14
                status: 403
                title: Denied by role-base access control
                detail: The request did not pass the role based access control check.
          headers: *ref_2
        '404':
          description: Account unknown
          content:
            application/problem+json:
              example: &ref_15
                status: 404
                title: Account unknown
                detail: >-
                  The provided account identifier could not be matched to an
                  existing account.
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /activate-mfa:
    post:
      tags: *ref_11
      operationId: activateLocalAccountMfa
      summary: Activate local account MFA
      description: >-
        Activates MFA on a local Morio account, and provides scratch codes as
        fallback.


        Three scratch codes will be provided that can each be used once as a
        fallback for the TOTP token, in case the device generating the token is
        unavailable.
      requestBody:
        description: The invite code, as well as username and (identity) provider
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                invite:
                  type: string
                  minLength: 48
                  maxLength: 48
                  description: The account invite code
                provider:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The ID of the identity provider to use for this account
                token:
                  type: string
                  minLength: 3
                  maxLength: 12
                  description: The TOTP token (one-time password)
                password:
                  type: string
                  minLength: 3
                  maxLength: 1024
                  description: The account's password
                username:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: The username of the account
              required:
                - invite
                - provider
                - token
                - password
                - username
              additionalProperties: false
            example:
              username: testAccount1722234633560
              invite: 055319ca21a36ac7b7a008694bb48cf6b882242a5f78b97d
              provider: local
              token: '171589'
              password: kAsflASD8900)()lmn#LE$Q0-
      responses:
        '200':
          description: MFA secret and QR code
          content:
            application/json:
              example:
                scratch_codes:
                  - >-
                    06858bad92373bfd4746b6128c5ab769f7b12a652101eeec1741e4dc7432fe99
                  - >-
                    d21da1e5e7cf70b1044f11e06a39135fab248f7f4d849d964c81a7e9e72d498f
                  - >-
                    7c68b780d1c77d17d292780acc44564e374262c58193daf867c6011cce4a9bab
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                This request violates the data schema:
                  value: *ref_10
                Account state is invalid:
                  value: *ref_13
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Denied by role-base access control
          content:
            application/problem+json:
              example: *ref_14
          headers: *ref_2
        '404':
          description: Account unknown
          content:
            application/problem+json:
              example: *ref_15
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /apikeys:
    get:
      tags: &ref_17
        - apikeys
      security: *ref_16
      operationId: listApiKeys
      summary: List API keys
      description: >-
        Returns the list of API keys.


        - When using the endpoint with the `user` role, the list will include
        all API keys created by the current user.

        - When using the endpoint with the `manager` role, the list will include
        all API keys belonging to accounts created by the current user.

        - When using the endpoint with a higher role (`operator`, `engineer`, or
        even `root`), the list will include all API keys.
      responses:
        '200':
          description: API key list
          content:
            application/json:
              example:
                - id: 68b04077-e103-4b8e-9e5f-7b5daff57b96
                  name: testKey2024-07-28T16:07:30.612Z
                  status: active
                  role: user
                  created_by: local.test_user
                  created_at: '2024-07-28T16:07:30.848Z'
                  updated_by: null
                  updated_at: null
                  last_login: null
                  key: 68b04077-e103-4b8e-9e5f-7b5daff57b96
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: &ref_19
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /apikey:
    post:
      tags: *ref_17
      operationId: createApiKey
      summary: Create API key
      description: >-
        Creates a Morio API key. The role of the API key can not be higher than
        the role of the user creating the API key.
      requestBody:
        description: The API key settings
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  description: A name for the API key
                expires:
                  type: number
                  format: float
                  minimum: 1
                  maximum: 730
                  description: Number of days before the API key expires
                role:
                  type: string
                  enum:
                    - user
                    - manager
                    - operator
                    - engineer
                    - root
                  description: The role to assign to the API key
              required:
                - name
                - expires
                - role
              additionalProperties: false
            example: &ref_18 {}
      responses:
        '200':
          description: API key details
          content:
            application/json:
              example: *ref_18
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_19
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                Nominative account required:
                  value:
                    status: 403
                    title: Nominative account required
                    detail: This action is only available to nominative accounts.
                Role unavailable:
                  value:
                    status: 403
                    title: Role unavailable
                    detail: The requested role is not available to this account.
                Database Failure:
                  value: &ref_20
                    status: 403
                    title: Database Failure
                    detail: >-
                      Cannot authenticate because the database returned an
                      error.
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /apikey/{id}/rotate:
    patch:
      tags: *ref_17
      operationId: rotateApiKey
      summary: Rotate API key
      description: Updates an existing API key.
      parameters: &ref_21
        - in: path
          name: id
          schema:
            type: string
            format: uuid
            description: The ID of the API key
          required: true
          description: The API key ID (a UUID)
      responses:
        '200':
          description: API key details
          content:
            application/json:
              example:
                id: 600d03a3-573b-4f64-b127-96f0157cb6b0
                name: testKey2024-07-29T06:47:57.472Z
                status: active
                role: user
                created_by: local.test_user
                created_at: '2024-07-29T06:47:57.679Z'
                expires_at: '2024-07-30T06:47:57.679Z'
                updated_by: local.test_user
                updated_at: '2024-07-29T06:47:57.872Z'
                secret: >-
                  90a28457c6bc7c5b5b40aa94730bf12b1f0bb726bfc015652147598ca781d3f7b61551716ffa8839cbad41e20ea76ffa
                last_login: null
                key: 600d03a3-573b-4f64-b127-96f0157cb6b0
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                Database Failure:
                  value: *ref_20
                Role insufficient:
                  value: &ref_22
                    status: 403
                    title: Role insufficient
                    detail: This endpoint required a higher role.
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /apikey/{id}/enable:
    patch:
      tags: *ref_17
      operationId: enableApiKey
      summary: Enable API key
      description: Updates an existing API key.
      parameters: *ref_21
      responses:
        '200':
          description: API key details
          content:
            application/json:
              example:
                id: 600d03a3-573b-4f64-b127-96f0157cb6b0
                name: testKey2024-07-29T06:47:57.472Z
                status: active
                role: user
                created_by: local.test_user
                created_at: '2024-07-29T06:47:57.679Z'
                expires_at: '2024-07-30T06:47:57.679Z'
                updated_by: local.test_user
                updated_at: '2024-07-29T06:47:58.048Z'
                last_login: '2024-07-29T06:47:57.985Z'
                key: 600d03a3-573b-4f64-b127-96f0157cb6b0
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                Database Failure:
                  value: *ref_20
                Role insufficient:
                  value: *ref_22
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /apikey/{id}/disable:
    patch:
      tags: *ref_17
      operationId: disableApiKey
      summary: Disable API key
      description: Updates an existing API key.
      parameters: *ref_21
      responses:
        '200':
          description: API key details
          content:
            application/json:
              example:
                id: 600d03a3-573b-4f64-b127-96f0157cb6b0
                name: testKey2024-07-29T06:47:57.472Z
                status: disabled
                role: user
                created_by: local.test_user
                created_at: '2024-07-29T06:47:57.679Z'
                expires_at: '2024-07-30T06:47:57.679Z'
                updated_by: local.test_user
                updated_at: '2024-07-29T06:47:58.020Z'
                last_login: '2024-07-29T06:47:57.985Z'
                key: 600d03a3-573b-4f64-b127-96f0157cb6b0
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                Database Failure:
                  value: *ref_20
                Role insufficient:
                  value: *ref_22
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /apikey/{id}:
    delete:
      tags: *ref_17
      operationId: deleteApiKey
      summary: Delete API key
      description: Removes a Morio API key.
      parameters: *ref_21
      responses:
        '204':
          description: No response body
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                Database Failure:
                  value: *ref_20
                Role insufficient:
                  value: *ref_22
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /login:
    post:
      tags: &ref_24
        - authentication
      operationId: login
      summary: Authenticate
      description: >-
        Generates a JSON Web Token that can be used for subsequential API
        access.
      requestBody:
        description: The Morio settings you want to validate
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/Request/login/apikey'
                - $ref: '#/components/schemas/Request/login/ldap'
                - $ref: '#/components/schemas/Request/login/local'
                - $ref: '#/components/schemas/Request/login/mrt'
            examples:
              apikey:
                value:
                  provider: apikey
                  data:
                    api_key: 724098e3-930a-4c93-9fac-9a55decfb735
                    api_key_secret: >-
                      c0502771315e8239462adcccab7b6867e6d2742e3675c7aacac369f43a8f27b836292009b6badb7bc7a293b10e3275d2
              ldap:
                value:
                  provider: ldap
                  data:
                    username: nidhubhs
                    password: VEePvJuorS0NZC43Ta1
                    role: user
              local:
                value:
                  provider: local
                  data:
                    username: testAccount1722068362387
                    password: 62adcccab7b6867e6d2
                    role: manager
                    token: '234923'
              mrt:
                value:
                  provider: mrt
                  data:
                    mrt: >-
                      mrt.14887e49a38949f0d82915f4becdf7d700e3dcfacf64fcec00681a5f74b1a600
                    role: engineer
      responses:
        '200':
          description: Account details
          content:
            application/json:
              examples:
                apikey:
                  value:
                    jwt: >-
                      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoiYXBpa2V5LjVlNTg1OGRiLWVlZjItNGM1YS05OGFhLTFlZDczM2FjODhhZSIsInJvbGUiOiJ1c2VyIiwicHJvdmlkZXIiOiJhcGlrZXkiLCJub2RlIjoiMzliMGI1ZmQtNjY0OC00MWY4LWIzYjktZGY5NmM1ZDExNTc5IiwiY2x1c3RlciI6Ijg2MDI5MDZmLTU0MzctNGNjZS1iMTUwLTdjMzM4N2RhMzZmYSIsImlhdCI6MTcyMjIzNjk5NiwibmJmIjoxNzIyMjM2OTk2LCJleHAiOjE3MjIyNTEzOTYsImF1ZCI6Im1vcmlvIiwiaXNzIjoibW9yaW8iLCJzdWIiOiJtb3JpbyJ9.LLx3wjEvAi4FdggXrkxdNTps3G50r4vhBcQF2FPEaJz9sYCxlewFKarPpmWvBu5JbkjpiZ7Nzv8rFGtNQBGt96Y4eZkPuqQ4nr6DaMp7UgoDcLqsV-2jlmLStHsHk3Bbd2Sm1eyMQvsdBeebd2fz4EGgziYd2uW4rvSGHSeTAGOymoWXilAI5nrOpiWczcIVnIfyhgdtSNwFc7MowiBGJGv0xELJQrWST3QZx_G6VNLYwJkPXaBna2dfC2UQ5nsr4RVRjaGzIVfmWfnHp7fZo-xjV_-QciXZUJcROoWjCdroDt_BDjZdWe8j8-VsyCyXAJ9cnsntFgknFRH2CYZb5jYlH2_gBSk-PIYSsTbAOjmPK0AxiUHJnRonMgP5Fdc1dF_GowAdlsBxyKffSN3z6tZbH3DvELmtT27O8tnZYnEKAFgAod4f_fXphiIcssEt-kAbhs7HsJp4rDI5l3Ur-HkxvjOuzPeNmishqjgqWHwFwH4fU34Hkdk9Fp7KIWRXbT_sV2bzuj7GwVlndnCGsCXU99vwwVBMTh-Yw61FxDcC0tHbHp72A9tAKtUfBaR8L0gbnnRbik5Z_dnN6kx_rgVA5D7rNCfj5j4vn4cyeCklywH51ApQtTr_EMddOJTxulOnktSbCwpvioPY5hjgQMHsH8vbh4__ja2aIXt89lc
                    data:
                      user: apikey.5e5858db-eef2-4c5a-98aa-1ed733ac88ae
                      role: user
                      provider: apikey
                  summary: apikey Example
                ldap:
                  value:
                    jwt: >-
                      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoidXNlcjIiLCJyb2xlIjoibWFuYWdlciIsImhpZ2hlc3Rfcm9sZSI6Im1hbmFnZXIiLCJwcm92aWRlciI6ImxkYXAiLCJub2RlIjoiYzljNGE5NTMtMTlmMi00YzFmLThkYTYtODk5ZGQ0MzEyMjdlIiwiY2x1c3RlciI6IjBmZjBkYzY2LTA3ZDQtNDAwYi04NWM2LTJiMDYwZmU3ZjQ2NiIsImlhdCI6MTcyMjIzNzM1MCwibmJmIjoxNzIyMjM3MzUwLCJleHAiOjE3MjIyNTE3NTAsImF1ZCI6Im1vcmlvIiwiaXNzIjoibW9yaW8iLCJzdWIiOiJtb3JpbyJ9.Z856Wb_D_I4qFXaGADT65XqrK-uCAwcjkpFYYtApWybjTErPJSKYTuILKKNxwfGBrDTn7VSf8nhieU47JmDYOSc7a5XbRCUuFuJ2SzK7cOxbsF6VtN3MSrykSkM17N42rB3qlXu-X4wY4eAXsvBBRG6AQI8Wo_ejMcIl239N01fdvcmiR-6EAfW1072BPE5Sl_zdx81Fw4QPKwjoIMKK-pjZJSjtTAKoLyZxJlRJnnmrXs7cGiVmvjgzz_jV--I6y9kd8ALFz4Ci8fXgRWc810Iiz_QAPz-j9AEKjvcnKY7tOixpS5AAnDtuhIQD2tvruCFfnHsUwlPxN1zgleFd9puaiVrTKWOVdvDVucohihBVk13f-jeBML1oU3j5arDowchkJnGkALEa6wTBd53qYI5QUT8_rQR-bhmtPQePMqjr1rryYNULJciQs6-Ie9vRiYYbs_aDJgCf-TDVffsYrccfpgvt_c6WAuhxLqCilVRtkcx7cJxoCaWu72Z_UTXMj_-dkj-Kv3J3Czd7xwjha_lOKazN1eR5ReqSGwo0xD0QXCdlvFM0MQjO42p_3fZdMY41hSz3IyHuj7Dyv9xLMYf_JA2W09TOP4PjYwqXUUZDDAElE7BTjtMpXR4zci21r4fsC6mckhAZL9P17b-LHA7M-H5mhmoKG4ExCbcpJ0w
                    data:
                      user: user2
                      role: manager
                      highest_role: manager
                      provider: ldap
                  summary: ldap Example
                local:
                  value:
                    jwt: >-
                      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoibG9jYWwudGVzdEFjY291bnQxNzIyMjM2OTIyMDQ4Iiwicm9sZSI6InVzZXIiLCJhdmFpbGFibGVfcm9sZXMiOlsidXNlciJdLCJoaWdoZXN0X3JvbGUiOiJ1c2VyIiwicHJvdmlkZXIiOiJsb2NhbCIsIm5vZGUiOiIzOWIwYjVmZC02NjQ4LTQxZjgtYjNiOS1kZjk2YzVkMTE1NzkiLCJjbHVzdGVyIjoiODYwMjkwNmYtNTQzNy00Y2NlLWIxNTAtN2MzMzg3ZGEzNmZhIiwiaWF0IjoxNzIyMjM2OTIzLCJuYmYiOjE3MjIyMzY5MjMsImV4cCI6MTcyMjI1MTMyMywiYXVkIjoibW9yaW8iLCJpc3MiOiJtb3JpbyIsInN1YiI6Im1vcmlvIn0.sij21XpVw2i6SjTZtms9Sl4WsTYh6wgcr0c79x7-6OQPaWam-Ne8t_mzcI5Opa8qOjdFBDBoRHjairzyURpQ-p0BmrDANp4gw17lAqvmgGySwTC-T0yqdRpvZLV85ZhSps3XqiTuWObOVztd3MOLc6xbbp-SEIk6VimzDWcSQbInDfTCbbx4OivWjIcpA6XGfVcXWWtZiJz7y8E8E2jrckV3jkqRUZuhZ_HIcOyh1LSKb4WWWybCcu-D6hC1VipX_oy2Q8227V-VY1Kgryxe-F8xckgBkIoFjdejVsz4UpkvWXsYEJEZjgKLC0zZEZJVaEJC3w6QpNj-nc5d5dgF0TDq_6T0GvTaoN_UZGBgYioGTd0wXHpw0Trzc0VQrN5O3yBYjnhsbwSWlhHlClSAbV_CCy2qUAyDOrXBGmOlIYN8YZ_eJe-wIYioISd9dd0h5rbTSjtMqpX8fDoRZv0jFraVDOk0eMwiGM_TKhsFfR3sx0samCt7k3nCTseLeufCxRUkBZmeoG7o0NrZ0tbTrUoS9XJX_PDK3v9u-Z1LqjmJe7nERG55gXQer-_a5yWn-LKWooAYFW3iLwZEpvAxQF_VtW2xoCkrj5BD9UOnotj6emHmK76oURrSd3waQ_EWmnwf86dSXPQiljp41jHt95V7jyN5P4my-ogotTKxoGA
                    data:
                      user: local.testAccount1722236922048
                      role: user
                      available_roles:
                        - user
                      highest_role: user
                      provider: local
                  summary: local Example
                mrt:
                  value:
                    jwt: >-
                      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoicm9vdCIsInJvbGUiOiJ1c2VyIiwiYXZhaWxhYmxlX3JvbGVzIjpbInVzZXIiLCJtYW5hZ2VyIiwib3BlcmF0b3IiLCJlbmdpbmVlciIsInJvb3QiXSwiaGlnaGVzdF9yb2xlIjoicm9vdCIsInByb3ZpZGVyIjoibXJ0Iiwibm9kZSI6IjM5YjBiNWZkLTY2NDgtNDFmOC1iM2I5LWRmOTZjNWQxMTU3OSIsImNsdXN0ZXIiOiI4NjAyOTA2Zi01NDM3LTRjY2UtYjE1MC03YzMzODdkYTM2ZmEiLCJpYXQiOjE3MjIyMzcwNTgsIm5iZiI6MTcyMjIzNzA1OCwiZXhwIjoxNzIyMjUxNDU4LCJhdWQiOiJtb3JpbyIsImlzcyI6Im1vcmlvIiwic3ViIjoibW9yaW8ifQ.Il7nNLfxv6g-m1ZrqLWgdmdFnv_rnOFnAxE40tqO_3KcQeckwqv8pw0vPtmNKCkbgXgIMqKOoFnw39bOIy8pZJkm-tiA5mC8bn8i-aKPNH8B2F1puNj2k902ah27gOE9MVPnCGi_KaZgglJ3A34BjPqodQm0pj9xjx403mYOHCpD6CkPKqClRWXpDli_Vaco0TAakZTUyM85QfgADetNKvNLj9MuosZeXjWMnH_4jzMuNi6zkY1h_kjV4C5XflCh5kY6vrH9esPAKeUAemxzMZypF2bcaHqnoPnKK0J3kePHaREwJ_bOe9CMuDMwOMOIXmX0xFBJxYgD7bd4vvy4PyespdGsBYNqPWzS1iyx-JfLJ33xVKizBGvBLNF3HQnH7GFdfs3P9VpJCGsc6xkLckIFiVkUhlYdYXz91wuS_RzvHzzdJpd5JJWEa642DnF5x0YpeOX-gCG0u8EWMGzvvSmC8ZWK8urpNAmSnr_lc0JeTOD5_wiq-4kiiwujG-FmOLHLWK5Gl5qJZNcEozqmjjolJaWjDvZ845LGpUfMtq1Tx0cZWazckPAZBFrcvhF6yztNpsAzaG454Y7zlT0OrirVYXWtsciMAAsAVRO-56y_0SCkgSKOtLMoJevjbwX4RKbJtjCL6jrT0lfKnRP0RBxEJyVMTb1jSUF9mQjEVMw
                    data:
                      user: root
                      role: user
                      available_roles:
                        - user
                        - manager
                        - operator
                        - engineer
                        - root
                      highest_role: root
                      provider: mrt
                  summary: mrt Example
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Response/login/apikey'
                  - $ref: '#/components/schemas/Response/login/ldap'
                  - $ref: '#/components/schemas/Response/login/local'
                  - $ref: '#/components/schemas/Response/login/mrt'
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: Multiple responses with this status code
          content:
            application/problem+json:
              examples:
                This request violates the data schema:
                  value: *ref_10
                Account state is invalid:
                  value: *ref_13
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '403':
          description: Identity Provider Unknown
          content:
            application/problem+json:
              example:
                status: 403
                title: Identity Provider Unknown
                detail: Cannot authenticate because the identity provider is unknown.
          headers: *ref_2
        '409':
          description: Conflict with an existing account
          content:
            application/problem+json:
              example: *ref_23
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /token:
    get:
      tags: *ref_24
      operationId: renewJwt
      summary: Renew JWT
      description: >-
        This will return a new JSON Web Token that can replace the current
        token. This will only work if the current token is not expired yet.
      responses:
        '200':
          description: JSON Web Token
          content:
            application/json:
              example:
                jwt: >-
                  eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoibG9jYWwudGVzdEFjY291bnQxNzIyMTg2NzE0OTU0Iiwicm9sZSI6InVzZXIiLCJhdmFpbGFibGVfcm9sZXMiOltdLCJwcm92aWRlciI6ImxvY2FsIiwiaWF0IjoxNzIyMTg2NzE2LCJuYmYiOjE3MjIxODY3MTYsImV4cCI6MTcyMjIwMTExNiwiYXVkIjoibW9yaW8iLCJpc3MiOiJtb3JpbyIsInN1YiI6Im1vcmlvIn0.CR28Y2xIBtDPOGZSpfSnee7qkRBBG470g4BgcpknJee-VEePvJuorS0NZC43Ta1-4Vx2684K7RgPZNsgW-SAN5yF8PdFe5-y9XtgEn3N3ZmXUCogJoRBQxjGC4UaK6Nrse4dJcqpnxhvUv1yPBcTbS0ycPvMynUd0szkG92u6jyPoDuLFErmDlEgCDlDsPPig81N9zg3Bb0fP44Acc0RpBGybgijYBbPsVZBRSolAr6bBtwuoqcD3Q2pMrkovKduZ1Uob1Cgu8sdmB9DwWETKflEzkcafR96Upej7t1OIiM4AdlznURJvOo2CKffK4GNOsdltQysDF3_aEmRjIY9qJxygQ_sHmPf3-t3MuRvd8zcr9lupN4QRvXCjyUMSg_i25Zq-psnP_aNb0rf6qNCBigNPdsR6QR0V_SotKPNFV9OpkuC44f39-h0IV3ZTYuPoy0WVIRLCQCkTA_1nRnXAOXTjc7wRlLFJ00olYSOQudauuP_JJ8Xpfy_2up_24Mqn__x4ulbPjQpjjirNtEgHJwpzKEES-2E0FFsJEs5V9w-LOtrc7Xyn7HQ2hyuWYHvnTePa2qxpmcowiFC3jdkE1sxF8HU5v46a5xV6no7QAPN7E5wzVj5pE7zSWRRU4m06NjYgVARqa755XrpY-TvYifk9XDboS1ZHYSM0oZJ-jI
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: &ref_25
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /whoami:
    get:
      tags: *ref_24
      operationId: whoami
      summary: Who am I?
      description: This will return info about the currently authenticated account
      responses:
        '200':
          description: JSON Web Token
          content:
            application/json:
              examples:
                apikey:
                  value:
                    value:
                      user: apikey.724098e3-930a-4c93-9fac-9a55decfb735
                      role: user
                      provider: apikey
                      node: 39b0b5fd-6648-41f8-b3b9-df96c5d11579
                      cluster: 8602906f-5437-4cce-b150-7c3387da36fa
                      iat: 1722187044
                      nbf: 1722187044
                      exp: 1722201444
                      aud: morio
                      iss: morio
                      sub: morio
                  summary: apikey Example
                local:
                  value:
                    value:
                      user: local.testAccount1722187141724
                      role: user
                      available_roles:
                        - user
                      highest_role: user
                      provider: local
                      node: 39b0b5fd-6648-41f8-b3b9-df96c5d11579
                      cluster: 8602906f-5437-4cce-b150-7c3387da36fa
                      iat: 1722187142
                      nbf: 1722187142
                      exp: 1722201542
                      aud: morio
                      iss: morio
                      sub: morio
                  summary: local Example
                mrt:
                  value:
                    value:
                      user: root
                      role: user
                      available_roles:
                        - user
                        - manager
                        - operator
                        - engineer
                        - root
                      highest_role: root
                      provider: mrt
                      node: 39b0b5fd-6648-41f8-b3b9-df96c5d11579
                      cluster: 8602906f-5437-4cce-b150-7c3387da36fa
                      iat: 1722187191
                      nbf: 1722187191
                      exp: 1722201591
                      aud: morio
                      iss: morio
                      sub: morio
                  summary: mrt Example
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_25
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /pkgs/clients/deb/build:
    post:
      tags: &ref_26
        - client packages
      operationId: buildDebPkg
      summary: Build .deb package
      description: >-
        This will trigger the build of a .deb client package.


        Note that this will start an ephemeral container to start the build.
        This API endpoint will not wait for the build to complete before
        retuning.
      requestBody:
        description: The configuration for building the `.deb` client package
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Package:
                  type: string
                Source:
                  type: string
                Section:
                  type: string
                  enum:
                    - utils
                Priority:
                  type: string
                  enum:
                    - required,important,standard,optional,extra
                Architecture:
                  type: string
                Essential:
                  type: string
                  enum:
                    - 'no'
                Depends:
                  type: array
                  items: {}
                Installed-Size:
                  type: number
                  format: float
                Maintainer:
                  type: string
                Changed-By:
                  type: string
                Uploaders:
                  type: array
                  items: {}
                Homepage:
                  type: string
                Description:
                  type: string
                DetailedDescription:
                  type: string
                Vcs-Git:
                  type: string
                Version:
                  type: string
                Revision:
                  type: number
                  format: float
              required:
                - Package
                - Source
                - Section
                - Priority
                - Architecture
                - Essential
                - Depends
                - Installed-Size
                - Maintainer
                - Changed-By
                - Uploaders
                - Homepage
                - Description
                - DetailedDescription
                - Vcs-Git
                - Version
                - Revision
              additionalProperties: false
            example:
              Package: morio-client
              Source: morio-client
              Section: utils
              Priority: optional
              Architecture: amd64
              Essential: 'no'
              Depends:
                - - auditbeat
                  - '>= 8.12'
                - - filebeat
                  - '>= 8.12'
                - - metricbeat
                  - '>= 8.12'
              Installed-Size: 5000
              Maintainer: CERT-EU <services@cert.europa.eu>
              Changed-By: Joost De Cock <joost.decock@cert.europa.eu>
              Uploaders:
                - Joost De Cock <joost.decock@cert.europa.eu>
              Homepage: https://github.com/certeu/morio
              Description: >-
                The Morio client collects and ships observability data to a
                Morio instance.
              DetailedDescription: >-
                Deploy this Morio client (based on Elastic Beats) on your
                endpoints,

                and collect their data on one or more centralized Morio
                instances

                for analysis, further processing, downstream routing &
                filtering,

                or event-driven automation.
              Vcs-Git: https://github.com/certeu/morio -b main [clients/linux]
              Version: 0.2.0
              Revision: 1
      responses:
        '200':
          description: Confirmation data
          content:
            application/json:
              example:
                result: ok
                status: building
                settings:
                  Package: morio-client
                  Source: morio-client
                  Section: utils
                  Priority: optional
                  Architecture: amd64
                  Essential: 'no'
                  Installed-Size: 5000
                  Maintainer: CERT-EU <services@cert.europa.eu>
                  Changed-By: Joost De Cock <joost.decock@cert.europa.eu>
                  Homepage: https://github.com/certeu/morio
                  Description: >-
                    The Morio client collects and ships observability data to a
                    Morio instance.
                      Deploy this Morio client (based on Elastic Beats) on your endpoints,
                      and collect their data on one or more centralized Morio instances
                      for analysis, further processing, downstream routing & filtering,
                      or event-driven automation.
                  Vcs-Git: https://github.com/certeu/morio -b main [clients/linux]
                  Version: 0.2.0-1
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_25
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /pkgs/clients/deb/defaults:
    get:
      tags: *ref_26
      operationId: getDebDefaults
      summary: Get .deb package defaults
      description: >-
        This will return the default values to create a new .deb client package.


        Note that configuration of a `.deb`package needs to be correct or the
        package will not function.

        You can adapt these defaults (that's why we provide them), but should
        [consult the Debian documnentation on
        packaging](https://wiki.debian.org/Packaging).
      responses:
        '200':
          description: Debian client package defaults
          content:
            application/json:
              example:
                Package: morio-client
                Source: morio-client
                Section: utils
                Priority: optional
                Architecture: amd64
                Essential: 'no'
                Depends:
                  - - auditbeat
                    - '>= 8.12'
                  - - filebeat
                    - '>= 8.12'
                  - - metricbeat
                    - '>= 8.12'
                Installed-Size: 5000
                Maintainer: CERT-EU <services@cert.europa.eu>
                Changed-By: Joost De Cock <joost.decock@cert.europa.eu>
                Uploaders:
                  - Joost De Cock <joost.decock@cert.europa.eu>
                Homepage: https://github.com/certeu/morio
                Description: >-
                  The Morio client collects and ships observability data to a
                  Morio instance.
                DetailedDescription: >-
                  Deploy this Morio client (based on Elastic Beats) on your
                  endpoints,

                  and collect their data on one or more centralized Morio
                  instances

                  for analysis, further processing, downstream routing &
                  filtering,

                  or event-driven automation.
                Vcs-Git: https://github.com/certeu/morio -b main [clients/linux]
                Version: 0.2.0
                Revision: 1
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_25
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /ca/certificate:
    post:
      tags: &ref_27
        - cryptography
      operationId: generateCertificate
      summary: Generate X.509 certificate
      description: >-
        Generates an X.509 certificate, issued by Morio's internal Certificate
        Authority
      requestBody:
        description: The Morio settings you want to validate
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                certificate:
                  type: object
                  properties:
                    cn:
                      type: string
                    c:
                      type: string
                    st:
                      type: string
                    l:
                      type: string
                    o:
                      type: string
                    ou:
                      type: string
                    san:
                      type: array
                      items: {}
                  required:
                    - cn
                    - c
                    - st
                    - l
                    - o
                    - ou
                    - san
                  additionalProperties: false
              additionalProperties: false
            example:
              certificate:
                cn: A Morio Certificate
                c: BE
                st: Brussels
                l: Brussels
                o: CertsRus
                ou: NotThatCrypto
                san:
                  - morio-name1.brussels.morio.it
                  - morio-name2.brussels.morio.it
                  - morio-name3.brussels.morio.it
      responses:
        '200':
          description: X.509 data
          content:
            application/json:
              example:
                certificate:
                  crt: >
                    -----BEGIN CERTIFICATE-----

                    MIIFIjCCAwqgAwIBAgIQZEZGk0+zMNeeFQOzdPmE0jANBgkqhkiG9w0BAQsFADCB

                    nDELMAkGA1UEBhMCQkUxETAPBgNVBAgTCEJydXNzZWxzMREwDwYDVQQHEwhCcnVz

                    c2VsczEZMBcGA1UEChMQRW5naW5lZXJpbmcgVGVhbTEZMBcGA1UECxMQTW9yaW8g

                    VW5pdCBUZXN0czExMC8GA1UEAxMoTW9yaW8gSW50ZXJtZWRpYXRlIENlcnRpZmlj

                    YXRlIEF1dGhvcml0eTAeFw0yNDA3MjkwOTI1MDRaFw0yNjA3MzAwOTI2MDRaMB4x

                    HDAaBgNVBAMTE0EgTW9yaW8gQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUA

                    A4IBDwAwggEKAoIBAQC/lhIGkpFmgqh3roMLONXNkSz6WegKmI72WKmw4hUBOdeL

                    i0zSmtrBWxj1+f7AA9niPWaU+TISuD5V6pSTGqYA0Q+cX3MNe/hJUk+hnjohqASR

                    tW4MXbxs0xiaKGL8O30F7DPP2YTLCiAwn2ljFkA5jI6YvFh7lSPDJRMJBL7GlK2X

                    fIfaJC793U75mB1GRJQJ6VS0REXkh6fFPXyA01E7DhlLBcmzSsUKwXo36agewWpq

                    DIVWtNDG6CEJVvtdjOTCx5aDysCsfDyVax0/ufCy176ryakqru4YahtuFBLdkmgw

                    1PTjhLKNyGcJb59JtzaC2gnPQ9jGQLGu8lAe1IjZAgMBAAGjgdwwgdkwDgYDVR0P

                    AQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAdBgNVHQ4E

                    FgQU6r8GEWT1O4DJsB6Bcy7dOiz5NN4wHwYDVR0jBBgwFoAUoSdQN6s/1SyP/x1y

                    15KPY89ogRUwHQYDVR0RBBYwFIISdW5pdC50ZXN0Lm1vcmlvLml0MEkGDCsGAQQB

                    gqRkxihAAQQ5MDcCAQEEBWFkbWluBCtDVTJzVDhZT3Q0aGJhWFhCUmthREVRVFoz

                    Qk5aSk9EalpTdmt3a2E1M0JNMA0GCSqGSIb3DQEBCwUAA4ICAQA2Abl/JkbsaSVW

                    nyF3FY6Kf4tBs+ZpVufyn5JLyWbA9T/QccBAGw7k7nOSWXhVoDjFBRyX6aVkUUuD

                    LfX30vztU9fXkVmPO7ElBVG163zh+l3+jtZhKmGmHyFmipsDKSRu+zNlyjJYkxD+

                    A+HsTM1cG8+W/KLPOIfQZeE/9HmUCAOtsMeXWuSOmXuq5ZjPQEClAAG0luDVGXuF

                    0gyUDSfe7T8pVdUdlBMLixEyuFBFmZ0jjrf3jDDdor6xM8rl9gFJEGsv24NbHQCu

                    58u1rcLUswMh6xJr3Umc7V3h0Mfaqss2RupB+6s2jgtwNXUPrts8guXKl74qmISq

                    8Voon8kJ3KJqau4rjnpIDFLFErgbBtwfViEH1YRWYGrxSRqD5oDjDDudg3zekFQ6

                    YH0yjCKpSJB9JcF/EDKHU4mwatl80PWo9kLDyivvtUq+cIQn9AJR99NiOSLkUbBv

                    iC6KSkGOSGoibQOKpXCQJkqJLlKgR2IEfy8HiN+Or971JNEKApv7duU8iIpk0Svl

                    20pI4oz4qSpt8hJzW/4CAD3sPnsQrlYmxLWQDNgJhebqwMqya37RDzny22gThpo8

                    GpCrWQi/h5iZUO1o/h/Qy1wNB/K+zzJgGKCJw+BOzfXuX8uNWIYZc6C19AfcuJuR

                    Q0qAthZjtW6wcj7ohuhq49szIug44A==

                    -----END CERTIFICATE-----
                  ca: >
                    -----BEGIN CERTIFICATE-----

                    MIIGWjCCBEKgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBlDELMAkGA1UEBhMCQkUx

                    ETAPBgNVBAgTCEJydXNzZWxzMREwDwYDVQQHEwhCcnVzc2VsczEZMBcGA1UEChMQ

                    RW5naW5lZXJpbmcgVGVhbTEZMBcGA1UECxMQTW9yaW8gVW5pdCBUZXN0czEpMCcG

                    A1UEAxMgTW9yaW8gUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMjQwNzI5

                    MDcxMzM3WhcNMjkwNzI5MDcxMzM3WjCBnDELMAkGA1UEBhMCQkUxETAPBgNVBAgT

                    CEJydXNzZWxzMREwDwYDVQQHEwhCcnVzc2VsczEZMBcGA1UEChMQRW5naW5lZXJp

                    bmcgVGVhbTEZMBcGA1UECxMQTW9yaW8gVW5pdCBUZXN0czExMC8GA1UEAxMoTW9y

                    aW8gSW50ZXJtZWRpYXRlIENlcnRpZmljYXRlIEF1dGhvcml0eTCCAiIwDQYJKoZI

                    hvcNAQEBBQADggIPADCCAgoCggIBAJdVXnZsMS6/esyEgOBZIowVQOygS7OX1h8/

                    6Wi2HZxcXk6NY6a53s1e0AVqqgnbcT5iSmdVdlsJw2uhHtm+AHAGnWQr+dNwLYBK

                    1e6V5rTrW4oDZ4eMjVzEGfOkvYJplnTi27iqmrj/Em6xZ++z3E5Ujs/OP1k0HXQj

                    DVgNa9hP4fV/JWOd8krWglgGQhSLINhenRldD51IpRfM3jUkxMC1WinAQ/10cv62

                    KQzHGmPK/gDnNb0mJvF5JD0rN+Fr6Y+HY/M5Ti9jEw2JAZwt189fRG/Fpuje/Oca

                    mWDWfiEHszrTwgIGQvNURmdsDUaXKO/DbCq8dDG9bWARREXnU/C3sOVtD1H5Lm12

                    w/LCGa3+81DFcSXcwwxppGl9JgA69nfp8HJTHR1zeNPM1eCPukz/26A3mWEh0zU6

                    xaqS0oeO0+aaPreLn+W7n36/oI0gc1m3hdQtOljBZFOGQQzkP+fQR0Wh/Z/+41N8

                    cM1IALhsXq3Ot0w9R8ewIAitUf5lqXNDmZkFM3Z51fB1novAW6QECk1no+Hiq10s

                    SHMyKkBPAeXMzxEutkT84XxBPvBfFxOyRdQim7hT9bn2t7BWQD49gkDonVGTh+HL

                    iwydENkBuj/5M6+X6f4K1SsdttvyMqO4wxcJyaDB9O2h9S6WAkCL+zCV02BPjrFq

                    XfIqC5XJAgMBAAGjgawwgakwDAYDVR0TBAUwAwEB/zALBgNVHQ8EBAMCAvQwOwYD

                    VR0lBDQwMgYIKwYBBQUHAwEGCCsGAQUFBwMCBggrBgEFBQcDAwYIKwYBBQUHAwQG

                    CCsGAQUFBwMIMBEGCWCGSAGG+EIBAQQEAwIA9zAdBgNVHQ4EFgQUoSdQN6s/1SyP

                    /x1y15KPY89ogRUwHQYDVR0RBBYwFIISdW5pdC50ZXN0Lm1vcmlvLml0MA0GCSqG

                    SIb3DQEBCwUAA4ICAQAV/yCUT8sZZj7VmSDxdQ6pbL/JWuWI6uA1g1nYNYORf7NA

                    0OSFeb9SCJxAsQoTO2iWmDfwSd1mYIIKDDZ59l8COrWyIlPFvLxaJrfQFuMrK1yN

                    2JDaS+qKRwX2MRdjKQNLR87Ql2oC4ZynJdnflMkSP7Kw3yiok/YpUnf7y5iCuHTe

                    TXatprHebxFAcQJIhx+VNGpe5saRCGiCLfVcB6hXVKhMXHoXfrwhj4nKe8H0I/tx

                    67r2JzvrQBBeVSGqoXDWgbK3RzAyPoom1jj4lot/WajVE2tc/3p0YwluZDiyuhOw

                    VEexHB5g7PdqPY9U5yvBVTDa1lDhPp/5oxXrfhFjIjfrA9IpW6qATqx27001vhY7

                    eTduv3rO0SH60ueBtKr77PA/9qjG+yck3N4uxPofGKZ+ccqEAbeGkxyIY3UaD0EJ

                    ZjWg4QXvhnSL2cnwriJLDXQewiiXYH4ZKWCDbztgu2D49SUp/OO3AIQsf2w4EKit

                    sfz4snFiACNIm+FzZSwdZR/epL5IDZtOjV0XoFOBiWxsc7i5j9DEUDBfheAVxULO

                    he+ZxO+04Zx7NxB5ibJkwLLb5ITsug6qmIlcZ13IZ4QhkrUNcVZfxT2k0tJbfAxh

                    ZvYknMm1bpmi7AEuC4yg2ojnxTEvQsQsWrVKyFyZNEfDLHtBc6q8Y0SF/ILzug==

                    -----END CERTIFICATE-----
                  certChain:
                    - >
                      -----BEGIN CERTIFICATE-----

                      MIIFIjCCAwqgAwIBAgIQZEZGk0+zMNeeFQOzdPmE0jANBgkqhkiG9w0BAQsFADCB

                      nDELMAkGA1UEBhMCQkUxETAPBgNVBAgTCEJydXNzZWxzMREwDwYDVQQHEwhCcnVz

                      c2VsczEZMBcGA1UEChMQRW5naW5lZXJpbmcgVGVhbTEZMBcGA1UECxMQTW9yaW8g

                      VW5pdCBUZXN0czExMC8GA1UEAxMoTW9yaW8gSW50ZXJtZWRpYXRlIENlcnRpZmlj

                      YXRlIEF1dGhvcml0eTAeFw0yNDA3MjkwOTI1MDRaFw0yNjA3MzAwOTI2MDRaMB4x

                      HDAaBgNVBAMTE0EgTW9yaW8gQ2VydGlmaWNhdGUwggEiMA0GCSqGSIb3DQEBAQUA

                      A4IBDwAwggEKAoIBAQC/lhIGkpFmgqh3roMLONXNkSz6WegKmI72WKmw4hUBOdeL

                      i0zSmtrBWxj1+f7AA9niPWaU+TISuD5V6pSTGqYA0Q+cX3MNe/hJUk+hnjohqASR

                      tW4MXbxs0xiaKGL8O30F7DPP2YTLCiAwn2ljFkA5jI6YvFh7lSPDJRMJBL7GlK2X

                      fIfaJC793U75mB1GRJQJ6VS0REXkh6fFPXyA01E7DhlLBcmzSsUKwXo36agewWpq

                      DIVWtNDG6CEJVvtdjOTCx5aDysCsfDyVax0/ufCy176ryakqru4YahtuFBLdkmgw

                      1PTjhLKNyGcJb59JtzaC2gnPQ9jGQLGu8lAe1IjZAgMBAAGjgdwwgdkwDgYDVR0P

                      AQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAdBgNVHQ4E

                      FgQU6r8GEWT1O4DJsB6Bcy7dOiz5NN4wHwYDVR0jBBgwFoAUoSdQN6s/1SyP/x1y

                      15KPY89ogRUwHQYDVR0RBBYwFIISdW5pdC50ZXN0Lm1vcmlvLml0MEkGDCsGAQQB

                      gqRkxihAAQQ5MDcCAQEEBWFkbWluBCtDVTJzVDhZT3Q0aGJhWFhCUmthREVRVFoz

                      Qk5aSk9EalpTdmt3a2E1M0JNMA0GCSqGSIb3DQEBCwUAA4ICAQA2Abl/JkbsaSVW

                      nyF3FY6Kf4tBs+ZpVufyn5JLyWbA9T/QccBAGw7k7nOSWXhVoDjFBRyX6aVkUUuD

                      LfX30vztU9fXkVmPO7ElBVG163zh+l3+jtZhKmGmHyFmipsDKSRu+zNlyjJYkxD+

                      A+HsTM1cG8+W/KLPOIfQZeE/9HmUCAOtsMeXWuSOmXuq5ZjPQEClAAG0luDVGXuF

                      0gyUDSfe7T8pVdUdlBMLixEyuFBFmZ0jjrf3jDDdor6xM8rl9gFJEGsv24NbHQCu

                      58u1rcLUswMh6xJr3Umc7V3h0Mfaqss2RupB+6s2jgtwNXUPrts8guXKl74qmISq

                      8Voon8kJ3KJqau4rjnpIDFLFErgbBtwfViEH1YRWYGrxSRqD5oDjDDudg3zekFQ6

                      YH0yjCKpSJB9JcF/EDKHU4mwatl80PWo9kLDyivvtUq+cIQn9AJR99NiOSLkUbBv

                      iC6KSkGOSGoibQOKpXCQJkqJLlKgR2IEfy8HiN+Or971JNEKApv7duU8iIpk0Svl

                      20pI4oz4qSpt8hJzW/4CAD3sPnsQrlYmxLWQDNgJhebqwMqya37RDzny22gThpo8

                      GpCrWQi/h5iZUO1o/h/Qy1wNB/K+zzJgGKCJw+BOzfXuX8uNWIYZc6C19AfcuJuR

                      Q0qAthZjtW6wcj7ohuhq49szIug44A==

                      -----END CERTIFICATE-----
                    - >
                      -----BEGIN CERTIFICATE-----

                      MIIGWjCCBEKgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBlDELMAkGA1UEBhMCQkUx

                      ETAPBgNVBAgTCEJydXNzZWxzMREwDwYDVQQHEwhCcnVzc2VsczEZMBcGA1UEChMQ

                      RW5naW5lZXJpbmcgVGVhbTEZMBcGA1UECxMQTW9yaW8gVW5pdCBUZXN0czEpMCcG

                      A1UEAxMgTW9yaW8gUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMjQwNzI5

                      MDcxMzM3WhcNMjkwNzI5MDcxMzM3WjCBnDELMAkGA1UEBhMCQkUxETAPBgNVBAgT

                      CEJydXNzZWxzMREwDwYDVQQHEwhCcnVzc2VsczEZMBcGA1UEChMQRW5naW5lZXJp

                      bmcgVGVhbTEZMBcGA1UECxMQTW9yaW8gVW5pdCBUZXN0czExMC8GA1UEAxMoTW9y

                      aW8gSW50ZXJtZWRpYXRlIENlcnRpZmljYXRlIEF1dGhvcml0eTCCAiIwDQYJKoZI

                      hvcNAQEBBQADggIPADCCAgoCggIBAJdVXnZsMS6/esyEgOBZIowVQOygS7OX1h8/

                      6Wi2HZxcXk6NY6a53s1e0AVqqgnbcT5iSmdVdlsJw2uhHtm+AHAGnWQr+dNwLYBK

                      1e6V5rTrW4oDZ4eMjVzEGfOkvYJplnTi27iqmrj/Em6xZ++z3E5Ujs/OP1k0HXQj

                      DVgNa9hP4fV/JWOd8krWglgGQhSLINhenRldD51IpRfM3jUkxMC1WinAQ/10cv62

                      KQzHGmPK/gDnNb0mJvF5JD0rN+Fr6Y+HY/M5Ti9jEw2JAZwt189fRG/Fpuje/Oca

                      mWDWfiEHszrTwgIGQvNURmdsDUaXKO/DbCq8dDG9bWARREXnU/C3sOVtD1H5Lm12

                      w/LCGa3+81DFcSXcwwxppGl9JgA69nfp8HJTHR1zeNPM1eCPukz/26A3mWEh0zU6

                      xaqS0oeO0+aaPreLn+W7n36/oI0gc1m3hdQtOljBZFOGQQzkP+fQR0Wh/Z/+41N8

                      cM1IALhsXq3Ot0w9R8ewIAitUf5lqXNDmZkFM3Z51fB1novAW6QECk1no+Hiq10s

                      SHMyKkBPAeXMzxEutkT84XxBPvBfFxOyRdQim7hT9bn2t7BWQD49gkDonVGTh+HL

                      iwydENkBuj/5M6+X6f4K1SsdttvyMqO4wxcJyaDB9O2h9S6WAkCL+zCV02BPjrFq

                      XfIqC5XJAgMBAAGjgawwgakwDAYDVR0TBAUwAwEB/zALBgNVHQ8EBAMCAvQwOwYD

                      VR0lBDQwMgYIKwYBBQUHAwEGCCsGAQUFBwMCBggrBgEFBQcDAwYIKwYBBQUHAwQG

                      CCsGAQUFBwMIMBEGCWCGSAGG+EIBAQQEAwIA9zAdBgNVHQ4EFgQUoSdQN6s/1SyP

                      /x1y15KPY89ogRUwHQYDVR0RBBYwFIISdW5pdC50ZXN0Lm1vcmlvLml0MA0GCSqG

                      SIb3DQEBCwUAA4ICAQAV/yCUT8sZZj7VmSDxdQ6pbL/JWuWI6uA1g1nYNYORf7NA

                      0OSFeb9SCJxAsQoTO2iWmDfwSd1mYIIKDDZ59l8COrWyIlPFvLxaJrfQFuMrK1yN

                      2JDaS+qKRwX2MRdjKQNLR87Ql2oC4ZynJdnflMkSP7Kw3yiok/YpUnf7y5iCuHTe

                      TXatprHebxFAcQJIhx+VNGpe5saRCGiCLfVcB6hXVKhMXHoXfrwhj4nKe8H0I/tx

                      67r2JzvrQBBeVSGqoXDWgbK3RzAyPoom1jj4lot/WajVE2tc/3p0YwluZDiyuhOw

                      VEexHB5g7PdqPY9U5yvBVTDa1lDhPp/5oxXrfhFjIjfrA9IpW6qATqx27001vhY7

                      eTduv3rO0SH60ueBtKr77PA/9qjG+yck3N4uxPofGKZ+ccqEAbeGkxyIY3UaD0EJ

                      ZjWg4QXvhnSL2cnwriJLDXQewiiXYH4ZKWCDbztgu2D49SUp/OO3AIQsf2w4EKit

                      sfz4snFiACNIm+FzZSwdZR/epL5IDZtOjV0XoFOBiWxsc7i5j9DEUDBfheAVxULO

                      he+ZxO+04Zx7NxB5ibJkwLLb5ITsug6qmIlcZ13IZ4QhkrUNcVZfxT2k0tJbfAxh

                      ZvYknMm1bpmi7AEuC4yg2ojnxTEvQsQsWrVKyFyZNEfDLHtBc6q8Y0SF/ILzug==

                      -----END CERTIFICATE-----
                  tlsOptions:
                    cipherSuites:
                      - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256
                      - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
                    minVersion: 1.2
                    maxVersion: 1.3
                    renegotiation: false
                key: "-----BEGIN RSA PRIVATE KEY-----\r\nMIIEpQIBAAKCAQEAv5YSBpKRZoKod66DCzjVzZEs+lnoCpiO9lipsOIVATnXi4tM\r\n0prawVsY9fn+wAPZ4j1mlPkyErg+VeqUkxqmANEPnF9zDXv4SVJPoZ46IagEkbVu\r\nDF28bNMYmihi/Dt9Bewzz9mEywogMJ9pYxZAOYyOmLxYe5UjwyUTCQS+xpStl3yH\r\n2iQu/d1O+ZgdRkSUCelUtERF5IenxT18gNNROw4ZSwXJs0rFCsF6N+moHsFqagyF\r\nVrTQxughCVb7XYzkwseWg8rArHw8lWsdP7nwste+q8mpKq7uGGobbhQS3ZJoMNT0\r\n44SyjchnCW+fSbc2gtoJz0PYxkCxrvJQHtSI2QIDAQABAoIBAC0DD7Ienm20tesE\r\ng8JPtJ/LA4PAOs2+gRwswZWO0HuMwPEGpeJ3Qn0aL5efCDTJ0teeMGtAzvxp8C9U\r\nYVrccHMRqzbEkC3zWea0IYRpveOpa4VmWHgsT7hLsmSJp5P2UA3jrFqhktr3Qo/Z\r\n7DM9B5LdzKTi33ENnazcGYhNZpsV7Eg+GZI8oP4mLNJ6ARvEEk3xzV1bsmJxHKnt\r\nSGg4Vib+a8/Ac90rcXPztjOy6r1tnuXaeeKdfMyQ24t1wiD7KPuwU/0BCHUuORqn\r\n6WMpMeBbTTCuaRvvNvZdG5JIZ2GkZRn/XUDUSBi4l0WDfiCc2mcr7BQbGkMnQhOw\r\ncfkkK+cCgYEA4wzqMPKoGZ5uPSnyZpyxLwke8Mu0kFdvgq+wMhpNKq+ZqN1mq/nx\r\n6G7TiSbxF6Kqsht8lnWGVs3+psqcMTQPDklUKM6cVxbJrXNZqYENwsMqKqdBmRXR\r\nPPIWfjht5GSxCdMX0Pefo8qsB1nkC2+62lDPu6D3FUk3iDasUBj/cuMCgYEA2AOU\r\nA3POMiO8MstzvhCYo471WM7QmuORDETlQw9dt9OC0u9RMjJuAhHDl618onfo3ByP\r\nuKkUN4zdZ7fjG0B0pwjP92H763BtWSzXc4tJz4YzAo5zkPxtt5MLGb2eG1n3xsm7\r\n7CVlPNU9C0xf5gQM0ddW8GrqX2lszFkZY76alhMCgYEAr2xMCROCs4CH9fPR2Fwa\r\nPZgTcsJAuQEFI/iv7pYJpwBTfXfKGvebYxU1lRMkVTmWHtRD10/oQmsX5DBIq29o\r\nboZTYs/3VQZDPiMQVHlkc2Us0BW4BhooNqlonY7lwP/XFRsmnIqlqfwuG+Pk4L0r\r\npf+n8HS2UpjmMfTj/2LBAzcCgYEAtkdesQMZrgmll59CzdGnW+0Yb5YlRW5eSWIh\r\nq9LdnG8o5+H2PEt9tNVUnTtR/q78mjCnvoU+gBmoAwuS4r4jMYgoJXJTaDr4qtVC\r\nAUg6QpnVlYSrVF8OHmhAZ7owHphukxpML1rm8MxntI8AJVKplrEFtd4iY9zMaCuP\r\nVzHRtG0CgYEAm/BRJG7eVtBwzSKMJzdFgyIZFPZTrgkaZtnxrOarCkHwWbOW9i3y\r\nRBO4QuoVTU4XMUrQxQPDQLZ/Feo08qNuNSnbp3yTeQRIHhBnGqY2YjiRAIVPReDl\r\nCY9RafOlspqXqxQIEtz7rSS7Ezn46G158LvXGI+/1qHPxlejU/7uswc=\r\n-----END RSA PRIVATE KEY-----\r\n"
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_25
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /decrypt:
    post:
      tags: *ref_27
      operationId: decryptData
      summary: Decrypt data
      description: Decrypts data with Morio's internal key pair
      requestBody:
        description: The data you want to decrypt
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                iv:
                  type: string
                ct:
                  type: string
              required:
                - iv
                - ct
              additionalProperties: false
            examples:
              text:
                value: &ref_30
                  iv: f098ed647cae1e2ddfc53240c786c3ab
                  ct: >-
                    43a24de68ca4e8625692e3b3dc8e586d5e146531d49a70c727bac838d57bcda0
                summary: text Example
              json:
                value: &ref_31
                  iv: de2ec1efba8dbbdfa85afd4a13319160
                  ct: >-
                    67aadb5e24d387f5ff4a9e6827590052ea0a78b015860a2b4f5c79801f6d3ec3294c29214a4e15cf90ba633f5df825c42f82e7c5ef14ace06a3b1981f7992991ee3816cd0c372629382966344431563ad1cffd50f444c35250806dccc36b88c0
                summary: json Example
      responses:
        '200':
          description: Decrypted data
          content:
            application/json:
              examples:
                text:
                  value: &ref_28
                    data: This is secret
                  summary: text Example
                json:
                  value: &ref_29
                    data: >-
                      { "secret1": "Some string", "secret2": ["an", "array",
                      "of", "strings"] }
                  summary: json Example
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /encrypt:
    post:
      tags: *ref_27
      operationId: encryptData
      summary: Encrypt data
      description: Encrypts data with Morio's internal key pair
      requestBody:
        description: The data you want to encrypt
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: string
              required:
                - data
              additionalProperties: false
            examples:
              text:
                value: *ref_28
                summary: text Example
              json:
                value: *ref_29
                summary: json Example
      responses:
        '200':
          description: Encrypted data
          content:
            application/json:
              examples:
                text:
                  value: *ref_30
                  summary: text Example
                json:
                  value: *ref_31
                  summary: json Example
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/allcontainers:
    get:
      tags: &ref_32
        - docker
      summary: List containers
      description: >-
        This is a proxy endpoint for the Docker API on the host system that
        returns list of all containers available on the host system.


        To only get the running containers, use the `/docker/containers`
        endpoint instead.
      operationId: allcontainersGet
      responses:
        '200':
          description: >-
            [See **List Containers** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerList) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: &ref_33
                status: 409
                title: Not available in ephemeral mode
                detail: >-
                  This endpoint is not available when Morio is running in
                  ephemeral mode. Since this system has not yet been set up,
                  this endpoint is not yet available.
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/containers:
    get:
      tags: *ref_32
      summary: List running containers
      description: >-
        This is a proxy endpoint for the Docker API on the host system that
        returns the list of containers currently running on the hoste sytem.


        To get all containers, use the `/docker/allcontainers` endpoint instead.
      operationId: containersGet
      responses:
        '200':
          description: >-
            [See **List Containers** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerList) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/df:
    get:
      tags: *ref_32
      summary: Get storage metrics
      description: >-
        This is a proxy endpoint for the Docker API on the host system that
        returns information on the used and available storage on the host sytem.


        This endpoint is named after the the `df` command on Linux.
      operationId: dfGet
      responses:
        '200':
          description: >-
            [See **Get data usage** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/System/operation/SystemDataUsage) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/images:
    get:
      tags: *ref_32
      summary: List images
      description: >-
        This is a proxy endpoint for the Docker API on the host system that
        returns the list of Docker images available on the host system.
      operationId: imagesGet
      responses:
        '200':
          description: >-
            [See **List Images** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Image/operation/ImageList) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/info:
    get:
      tags: *ref_32
      summary: Get Docker info
      description: >-
        This is a proxy endpoint for the Docker API on the host system that
        returns general information about the Docker daemon on the host system.
      operationId: infoGet
      responses:
        '200':
          description: >-
            [See **Get system information** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/System/operation/SystemInfo) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/networks:
    get:
      tags: *ref_32
      summary: List networks
      description: >-
        This is a proxy endpoint for the Docker API on the host system that
        returns a list of Docker networks on the host system.
      operationId: networksGet
      responses:
        '200':
          description: >-
            [See **List networks** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Network/operation/NetworkList) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/version:
    get:
      tags: *ref_32
      summary: Get Docker version
      description: >-
        This is a proxy endpoint for the Docker API on the host system that
        returns information on the version of Docker that is running on the host
        system.
      operationId: versionGet
      responses:
        '200':
          description: >-
            [See **Get version** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/System/operation/SystemVersion) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/container/{id}:
    get:
      tags: *ref_32
      summary: Inspect container
      description: >
        This is a proxy endpoint for the Docker API on the host system that
        returns information on the container with the ID passed as a parameter
        in the URL.


        This endpoint is equivalent to running the `inspect` command on a
        container in the Docker CLI.


        Note that Docker accepts an ID or (unambigious) name as input.
      parameters: &ref_34
        - in: path
          name: id
          schema:
            type: string
            description: The ID (or name) of the relevant Docker object
          required: true
          description: The ID (or name) of the relevant docker object
      operationId: container/idGet
      responses:
        '200':
          description: >-
            [See **Inspect a container** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerInspect/) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/container/{id}/logs:
    get:
      tags: *ref_32
      summary: Get logs
      description: >
        This is a proxy endpoint for the Docker API on the host system that
        returns logs from the container with the ID passed as a parameter in the
        URL.


        This endpoint is equivalent to running the `logs` command on a container
        in the Docker CLI.


        Note that Docker accepts an ID or (unambigious) name as input.
      parameters: *ref_34
      operationId: container/id/logsGet
      responses:
        '200':
          description: >-
            [See **Get container logs** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerInspect) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/container/{id}/stats:
    get:
      tags: *ref_32
      summary: Get usage stats
      description: >
        This is a proxy endpoint for the Docker API on the host system that
        returns stats based on resource usage from the container with the ID
        passed as a parameter in the URL.


        These stats come from a container'se `inspect` command in the Docker
        CLI.


        Note that Docker accepts an ID or (unambigious) name as input.
      parameters: *ref_34
      operationId: container/id/statsGet
      responses:
        '200':
          description: >-
            [See **Get container stats based on resource usages** in the Docker
            API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerInspect) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/image/{id}:
    get:
      tags: *ref_32
      summary: Inspect image
      description: >
        This is a proxy endpoint for the Docker API on the host system that
        returns information on the image with the ID passed as a parameter in
        the URL.


        This endpoint is equivalent to running the `inspect` command on an image
        in the Docker CLI.


        Note that Docker accepts an ID or (unambigious) name as input.
      parameters: *ref_34
      operationId: image/idGet
      responses:
        '200':
          description: >-
            [See **Inspect an image** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerInspect) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/networks/{id}:
    get:
      tags: *ref_32
      summary: Inspect network
      description: >
        This is a proxy endpoint for the Docker API on the host system that
        returns information on the network with the ID passed as a parameter in
        the URL.


        This endpoint is equivalent to running the `inspect` command on a
        network in the Docker CLI.


        Note that Docker accepts an ID or (unambigious) name as input.
      parameters: *ref_34
      operationId: networks/idGet
      responses:
        '200':
          description: >-
            [See **Inspect a network** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerInspect) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/containers/{id}/kill:
    put:
      tags: *ref_32
      operationId: containerKill
      summary: Kill container
      description: >-
        This changes, or attempts to change, the container state by issuing a
        `kill` command.
      parameters: *ref_34
      responses:
        '200':
          description: >-
            [See **Kill a container** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerKill) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/containers/{id}/pause:
    put:
      tags: *ref_32
      operationId: containerPause
      summary: Pause container
      description: >-
        This changes, or attempts to change, the container state by issuing a
        `pause` command.
      parameters: *ref_34
      responses:
        '200':
          description: >-
            [See **Pause a container** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerPause) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/containers/{id}/restart:
    put:
      tags: *ref_32
      operationId: containerRestart
      summary: Restart container
      description: >-
        This changes, or attempts to change, the container state by issuing a
        `restart` command.
      parameters: *ref_34
      responses:
        '200':
          description: >-
            [See **Restart a container** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerRestart) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/containers/{id}/start:
    put:
      tags: *ref_32
      operationId: containerStart
      summary: Start container
      description: >-
        This changes, or attempts to change, the container state by issuing a
        `start` command.
      parameters: *ref_34
      responses:
        '200':
          description: >-
            [See **Start a container** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerStart) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/containers/{id}/stop:
    put:
      tags: *ref_32
      operationId: containerStop
      summary: Stop container
      description: >-
        This changes, or attempts to change, the container state by issuing a
        `stop` command.
      parameters: *ref_34
      responses:
        '200':
          description: >-
            [See **Stop a container** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerStop) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /docker/containers/{id}/unpause:
    put:
      tags: *ref_32
      operationId: containerUnpause
      summary: Unpause container
      description: >-
        This changes, or attempts to change, the container state by issuing a
        `unpause` command.
      parameters: *ref_34
      responses:
        '200':
          description: >-
            [See **Unpause a container** in the Docker API
            docs](https://docs.docker.com/engine/api/v1.37/#tag/Container/operation/ContainerUnpause) 
          content: {}
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Not available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_33
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /setup:
    post:
      operationId: setup
      tags:
        - settings
        - anonymous
      summary: Set up Morio
      description: >-
        This will handle the initial setup of Morio. Or rather, it will ask
        Morio Core to do so after validation.


        This endpoint does not require authentication. However, it is only
        available in ephemeral Mode.

        In other words, once Morio is set up, this endpoint becomes unavailable.
      requestBody:
        description: The Morio settings to use for the initial setup
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cluster:
                  type: object
                  properties:
                    name:
                      type: string
                      pattern: ^[A-Za-z0-9\s-_,.;:()]+$
                      minLength: 2
                      maxLength: 255
                    broker_nodes:
                      type: array
                      items:
                        type: string
                      minItems: 1
                      maxItems: 9
                    flanking_nodes:
                      type: array
                      items:
                        type: string
                      minItems: 0
                      maxItems: 36
                    fqdn:
                      type: string
                      oneOf:
                        - {}
                        - x-required: true
                  required:
                    - name
                    - broker_nodes
                  additionalProperties: false
                metadata:
                  type: object
                  properties:
                    comment:
                      anyOf:
                        - type: string
                        - type: array
                          items:
                            type: string
                    version:
                      anyOf:
                        - type: string
                        - type: number
                          format: float
                  additionalProperties: false
                connector:
                  type: object
                  properties: {}
                  additionalProperties: false
                tokens:
                  type: object
                  properties:
                    flags:
                      type: object
                      properties:
                        HEADLESS_MORIO:
                          type: boolean
                        DISABLE_ROOT_TOKEN:
                          type: boolean
                        DISABLE_IDP_APIKEY:
                          type: boolean
                        DISABLE_IDP_LDAP:
                          type: boolean
                        DISABLE_IDP_LOCAL:
                          type: boolean
                        DISABLE_IDP_MRT:
                          type: boolean
                      additionalProperties: false
                    secrets:
                      type: object
                      properties: {}
                      additionalProperties: false
                    vars:
                      type: object
                      properties: {}
                      additionalProperties: false
                  additionalProperties: false
                iam:
                  type: object
                  properties:
                    providers:
                      type: object
                      properties: {}
                      additionalProperties: false
                    ui:
                      type: object
                      properties:
                        visibility:
                          type: object
                          properties: {}
                          additionalProperties: false
                        order:
                          type: array
                          items: {}
                      additionalProperties: false
                  additionalProperties: false
                vault:
                  type: object
                  properties:
                    url:
                      type: string
                    verify_certificate:
                      type: boolean
                    role:
                      type: string
                    jwt_auth_path:
                      type: string
                    kv_path:
                      type: string
                  required:
                    - url
                  additionalProperties: false
                preseed:
                  anyOf:
                    - type: object
                      properties:
                        url:
                          type: string
                        git:
                          type: object
                          properties: {}
                          additionalProperties:
                            type: object
                            properties:
                              id:
                                type: string
                              url:
                                type: string
                              ref:
                                type: string
                              user:
                                anyOf:
                                  - type: string
                                  - type: object
                                    properties:
                                      vault:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              path:
                                                type: string
                                              key:
                                                type: string
                                              instance:
                                                type: string
                                            required:
                                              - path
                                              - key
                                            additionalProperties: false
                                    additionalProperties: false
                              token:
                                anyOf:
                                  - type: string
                                  - type: object
                                    properties:
                                      vault:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              path:
                                                type: string
                                              key:
                                                type: string
                                              instance:
                                                type: string
                                            required:
                                              - path
                                              - key
                                            additionalProperties: false
                                    additionalProperties: false
                            additionalProperties: false
                        base:
                          anyOf:
                            - type: object
                              properties:
                                url:
                                  type: string
                                headers:
                                  type: object
                                  properties: {}
                                  additionalProperties: false
                              required:
                                - url
                              additionalProperties: false
                            - type: object
                              properties:
                                gitlab:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    project_id:
                                      type: number
                                      format: float
                                    file_path:
                                      type: string
                                    ref:
                                      type: string
                                    token:
                                      anyOf:
                                        - type: string
                                        - type: object
                                          properties:
                                            vault:
                                              anyOf:
                                                - type: string
                                                - type: object
                                                  properties:
                                                    path:
                                                      type: string
                                                    key:
                                                      type: string
                                                    instance:
                                                      type: string
                                                  required:
                                                    - path
                                                    - key
                                                  additionalProperties: false
                                          additionalProperties: false
                                  required:
                                    - url
                                    - project_id
                                    - file_path
                                    - token
                                  additionalProperties: false
                              additionalProperties: false
                            - type: object
                              properties:
                                github:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    owner:
                                      type: string
                                    repo:
                                      type: string
                                    file_path:
                                      type: string
                                    ref:
                                      type: string
                                    token:
                                      anyOf:
                                        - type: string
                                        - type: object
                                          properties:
                                            vault:
                                              anyOf:
                                                - type: string
                                                - type: object
                                                  properties:
                                                    path:
                                                      type: string
                                                    key:
                                                      type: string
                                                    instance:
                                                      type: string
                                                  required:
                                                    - path
                                                    - key
                                                  additionalProperties: false
                                          additionalProperties: false
                                  required:
                                    - owner
                                    - repo
                                    - file_path
                                    - token
                                  additionalProperties: false
                              additionalProperties: false
                            - type: string
                        overlays:
                          anyOf:
                            - type: array
                              items:
                                anyOf:
                                  - type: object
                                    properties:
                                      url:
                                        type: string
                                      headers:
                                        type: object
                                        properties: {}
                                        additionalProperties: false
                                    required:
                                      - url
                                    additionalProperties: false
                                  - type: object
                                    properties:
                                      gitlab:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          project_id:
                                            type: number
                                            format: float
                                          file_path:
                                            type: string
                                          ref:
                                            type: string
                                          token:
                                            anyOf:
                                              - type: string
                                              - type: object
                                                properties:
                                                  vault:
                                                    anyOf:
                                                      - type: string
                                                      - type: object
                                                        properties:
                                                          path:
                                                            type: string
                                                          key:
                                                            type: string
                                                          instance:
                                                            type: string
                                                        required:
                                                          - path
                                                          - key
                                                        additionalProperties: false
                                                additionalProperties: false
                                        required:
                                          - url
                                          - project_id
                                          - file_path
                                          - token
                                        additionalProperties: false
                                    additionalProperties: false
                                  - type: object
                                    properties:
                                      github:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          owner:
                                            type: string
                                          repo:
                                            type: string
                                          file_path:
                                            type: string
                                          ref:
                                            type: string
                                          token:
                                            anyOf:
                                              - type: string
                                              - type: object
                                                properties:
                                                  vault:
                                                    anyOf:
                                                      - type: string
                                                      - type: object
                                                        properties:
                                                          path:
                                                            type: string
                                                          key:
                                                            type: string
                                                          instance:
                                                            type: string
                                                        required:
                                                          - path
                                                          - key
                                                        additionalProperties: false
                                                additionalProperties: false
                                        required:
                                          - owner
                                          - repo
                                          - file_path
                                          - token
                                        additionalProperties: false
                                    additionalProperties: false
                                  - type: string
                            - type: string
                      additionalProperties: false
                    - type: string
              additionalProperties: false
            examples:
              cluster1:
                value: *ref_8
                summary: cluster1 Example
              cluster3:
                value: &ref_44
                  name: Morio Cluster Test
                  broker_nodes:
                    - morio-node1.tokyo.morio.it
                    - morio-node2.tokyo.morio.it
                    - morio-node3.tokyo.morio.it
                  fqdn: morio-cluster.tokyo.morio.it
                  tokens: *ref_35
                  iam: *ref_36
                  ui: *ref_37
                summary: cluster3 Example
      responses:
        '200':
          description: Setup result
          content:
            application/json:
              example: &ref_40
                result: success
                uuids:
                  node: 40361cd8-a149-4675-bd46-11a2b48acd04
                  cluster: 26e66c95-c342-49fc-8e3a-f5ca69b392ba
                root_token:
                  about: >-
                    This is the Morio root token. You can use it to authenticate
                    before any authentication providers have been set up. Store
                    it in a safe space, as it will never be shown again.
                  value: >-
                    mrt.7297ef89ed8c855ffc6786e0377bb7bf5e0137dcbc367494aebd39782747ab43
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Only available in ephemeral mode
          content:
            application/problem+json:
              example: &ref_41
                status: 409
                title: Only available in ephemeral mode
                detail: >-
                  This endpoint is only available when Morio is running in
                  ephemeral mode. Since this system has been set up, this
                  endpoint is no longer available.
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /preseed:
    post:
      operationId: preseed
      tags:
        - settings
        - anonymous
      summary: Preseed Morio
      description: >-
        This will handle the initial setup of Morio via preseeded settings. Or
        rather, it will ask Morio Core to do so after validation.


        This endpoint does not require authentication. However, it is only
        available in ephemeral Mode.

        In other words, once Morio is set up, this endpoint becomes unavailable.
      requestBody:
        description: The Morio preseed settings to use for the initial setup
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - type: object
                  properties:
                    url:
                      type: string
                    git:
                      type: object
                      properties: {}
                      additionalProperties:
                        type: object
                        properties:
                          id:
                            type: string
                          url:
                            type: string
                          ref:
                            type: string
                          user:
                            anyOf:
                              - type: string
                              - type: object
                                properties:
                                  vault:
                                    anyOf:
                                      - type: string
                                      - type: object
                                        properties:
                                          path:
                                            type: string
                                          key:
                                            type: string
                                          instance:
                                            type: string
                                        required:
                                          - path
                                          - key
                                        additionalProperties: false
                                additionalProperties: false
                          token:
                            anyOf:
                              - type: string
                              - type: object
                                properties:
                                  vault:
                                    anyOf:
                                      - type: string
                                      - type: object
                                        properties:
                                          path:
                                            type: string
                                          key:
                                            type: string
                                          instance:
                                            type: string
                                        required:
                                          - path
                                          - key
                                        additionalProperties: false
                                additionalProperties: false
                        additionalProperties: false
                    base:
                      anyOf:
                        - type: object
                          properties:
                            url:
                              type: string
                            headers:
                              type: object
                              properties: {}
                              additionalProperties: false
                          required:
                            - url
                          additionalProperties: false
                        - type: object
                          properties:
                            gitlab:
                              type: object
                              properties:
                                url:
                                  type: string
                                project_id:
                                  type: number
                                  format: float
                                file_path:
                                  type: string
                                ref:
                                  type: string
                                token:
                                  anyOf:
                                    - type: string
                                    - type: object
                                      properties:
                                        vault:
                                          anyOf:
                                            - type: string
                                            - type: object
                                              properties:
                                                path:
                                                  type: string
                                                key:
                                                  type: string
                                                instance:
                                                  type: string
                                              required:
                                                - path
                                                - key
                                              additionalProperties: false
                                      additionalProperties: false
                              required:
                                - url
                                - project_id
                                - file_path
                                - token
                              additionalProperties: false
                          additionalProperties: false
                        - type: object
                          properties:
                            github:
                              type: object
                              properties:
                                url:
                                  type: string
                                owner:
                                  type: string
                                repo:
                                  type: string
                                file_path:
                                  type: string
                                ref:
                                  type: string
                                token:
                                  anyOf:
                                    - type: string
                                    - type: object
                                      properties:
                                        vault:
                                          anyOf:
                                            - type: string
                                            - type: object
                                              properties:
                                                path:
                                                  type: string
                                                key:
                                                  type: string
                                                instance:
                                                  type: string
                                              required:
                                                - path
                                                - key
                                              additionalProperties: false
                                      additionalProperties: false
                              required:
                                - owner
                                - repo
                                - file_path
                                - token
                              additionalProperties: false
                          additionalProperties: false
                        - type: string
                    overlays:
                      anyOf:
                        - type: array
                          items:
                            anyOf:
                              - type: object
                                properties:
                                  url:
                                    type: string
                                  headers:
                                    type: object
                                    properties: {}
                                    additionalProperties: false
                                required:
                                  - url
                                additionalProperties: false
                              - type: object
                                properties:
                                  gitlab:
                                    type: object
                                    properties:
                                      url:
                                        type: string
                                      project_id:
                                        type: number
                                        format: float
                                      file_path:
                                        type: string
                                      ref:
                                        type: string
                                      token:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              vault:
                                                anyOf:
                                                  - type: string
                                                  - type: object
                                                    properties:
                                                      path:
                                                        type: string
                                                      key:
                                                        type: string
                                                      instance:
                                                        type: string
                                                    required:
                                                      - path
                                                      - key
                                                    additionalProperties: false
                                            additionalProperties: false
                                    required:
                                      - url
                                      - project_id
                                      - file_path
                                      - token
                                    additionalProperties: false
                                additionalProperties: false
                              - type: object
                                properties:
                                  github:
                                    type: object
                                    properties:
                                      url:
                                        type: string
                                      owner:
                                        type: string
                                      repo:
                                        type: string
                                      file_path:
                                        type: string
                                      ref:
                                        type: string
                                      token:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              vault:
                                                anyOf:
                                                  - type: string
                                                  - type: object
                                                    properties:
                                                      path:
                                                        type: string
                                                      key:
                                                        type: string
                                                      instance:
                                                        type: string
                                                    required:
                                                      - path
                                                      - key
                                                    additionalProperties: false
                                            additionalProperties: false
                                    required:
                                      - owner
                                      - repo
                                      - file_path
                                      - token
                                    additionalProperties: false
                                additionalProperties: false
                              - type: string
                        - type: string
                  additionalProperties: false
                - type: string
            examples:
              base:
                value: *ref_38
                summary: base Example
              overlays:
                value: *ref_39
                summary: overlays Example
      responses:
        '200':
          description: Setup result
          content:
            application/json:
              example: *ref_40
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After:
              description: Tells you when to retry due to rate limiting
              schema:
                type: string
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '409':
          description: Only available in ephemeral mode
          content:
            application/problem+json:
              example: *ref_41
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /settings:
    get:
      operationId: getSettings
      tags: &ref_43
        - settings
      summary: Get settings
      description: >-
        Returns the current settings.


        Note that Morio will encrypt all secrets and remove them from the
        settings. So this endpoint returns data that is safe to backup.
      responses:
        '200':
          description: Morio settings
          content:
            application/json:
              example:
                cluster:
                  name: Morio Unit Tests
                  broker_nodes:
                    - unit.test.morio.it
                tokens:
                  flags:
                    HEADLESS_MORIO: false
                    DISABLE_ROOT_TOKEN: false
                  secrets:
                    TEST_SECRET_1: >-
                      {"iv":"4b16f0efa70cdcad568441143b0ebbea","ct":"28262a424d8b3378b2ac78c7074deeec"}
                    TEST_SECRET_2: >-
                      {"iv":"bc0fb68aa6f37cc4eda8fca6a50d7448","ct":"cc786dfb1c5fe6dd4ad389855a206d57"}
                    LDAP_BIND_SECRET: >-
                      {"iv":"8b185698a44410657ce84ba6a35b82ce","ct":"7ed3e4c461455f3a4a8b44f834935b6b"}
                iam:
                  providers:
                    apikey:
                      provider: apikey
                      id: apikey
                      label: API Key
                    mrt: {}
                    local:
                      provider: local
                      id: mrt
                      label: Morio Account
                    ldap:
                      provider: ldap
                      verify_certificate: false
                      id: ldap
                      label: LDAP
                      about: Test LDAP server
                      server:
                        url: ldap://ldap:10389
                        bindDN: uid=admin,ou=system
                        bindCredentials: '{{{ LDAP_BIND_SECRET }}}'
                        searchBase: ou=Users,dc=ldap,dc=unit,dc=test,dc=morio,dc=it
                        searchFilter: (&(objectclass=person)(uid={{username}}))
                      username_field: uid
                      rbac:
                        manager:
                          attribute: employeetype
                          regex: ^manager$
                        operator:
                          attribute: employeetype
                          regex: ^admin$
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_42
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
    post:
      operationId: applySettings
      tags: *ref_43
      summary: Apply settings
      description: >-
        This will take a full set of new Morio settings and, after validation,
        pass them to core to be applied.


        Note that this endpoint requires you to post the full settings, so when
        making updates, make sure to leave nothing behind.
      requestBody:
        description: The new Morio settings
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                cluster:
                  type: object
                  properties:
                    name:
                      type: string
                      pattern: ^[A-Za-z0-9\s-_,.;:()]+$
                      minLength: 2
                      maxLength: 255
                    broker_nodes:
                      type: array
                      items:
                        type: string
                      minItems: 1
                      maxItems: 9
                    flanking_nodes:
                      type: array
                      items:
                        type: string
                      minItems: 0
                      maxItems: 36
                    fqdn:
                      type: string
                      oneOf:
                        - {}
                        - x-required: true
                  required:
                    - name
                    - broker_nodes
                  additionalProperties: false
                metadata:
                  type: object
                  properties:
                    comment:
                      anyOf:
                        - type: string
                        - type: array
                          items:
                            type: string
                    version:
                      anyOf:
                        - type: string
                        - type: number
                          format: float
                  additionalProperties: false
                connector:
                  type: object
                  properties: {}
                  additionalProperties: false
                tokens:
                  type: object
                  properties:
                    flags:
                      type: object
                      properties:
                        HEADLESS_MORIO:
                          type: boolean
                        DISABLE_ROOT_TOKEN:
                          type: boolean
                        DISABLE_IDP_APIKEY:
                          type: boolean
                        DISABLE_IDP_LDAP:
                          type: boolean
                        DISABLE_IDP_LOCAL:
                          type: boolean
                        DISABLE_IDP_MRT:
                          type: boolean
                      additionalProperties: false
                    secrets:
                      type: object
                      properties: {}
                      additionalProperties: false
                    vars:
                      type: object
                      properties: {}
                      additionalProperties: false
                  additionalProperties: false
                iam:
                  type: object
                  properties:
                    providers:
                      type: object
                      properties: {}
                      additionalProperties: false
                    ui:
                      type: object
                      properties:
                        visibility:
                          type: object
                          properties: {}
                          additionalProperties: false
                        order:
                          type: array
                          items: {}
                      additionalProperties: false
                  additionalProperties: false
                vault:
                  type: object
                  properties:
                    url:
                      type: string
                    verify_certificate:
                      type: boolean
                    role:
                      type: string
                    jwt_auth_path:
                      type: string
                    kv_path:
                      type: string
                  required:
                    - url
                  additionalProperties: false
                preseed:
                  anyOf:
                    - type: object
                      properties:
                        url:
                          type: string
                        git:
                          type: object
                          properties: {}
                          additionalProperties:
                            type: object
                            properties:
                              id:
                                type: string
                              url:
                                type: string
                              ref:
                                type: string
                              user:
                                anyOf:
                                  - type: string
                                  - type: object
                                    properties:
                                      vault:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              path:
                                                type: string
                                              key:
                                                type: string
                                              instance:
                                                type: string
                                            required:
                                              - path
                                              - key
                                            additionalProperties: false
                                    additionalProperties: false
                              token:
                                anyOf:
                                  - type: string
                                  - type: object
                                    properties:
                                      vault:
                                        anyOf:
                                          - type: string
                                          - type: object
                                            properties:
                                              path:
                                                type: string
                                              key:
                                                type: string
                                              instance:
                                                type: string
                                            required:
                                              - path
                                              - key
                                            additionalProperties: false
                                    additionalProperties: false
                            additionalProperties: false
                        base:
                          anyOf:
                            - type: object
                              properties:
                                url:
                                  type: string
                                headers:
                                  type: object
                                  properties: {}
                                  additionalProperties: false
                              required:
                                - url
                              additionalProperties: false
                            - type: object
                              properties:
                                gitlab:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    project_id:
                                      type: number
                                      format: float
                                    file_path:
                                      type: string
                                    ref:
                                      type: string
                                    token:
                                      anyOf:
                                        - type: string
                                        - type: object
                                          properties:
                                            vault:
                                              anyOf:
                                                - type: string
                                                - type: object
                                                  properties:
                                                    path:
                                                      type: string
                                                    key:
                                                      type: string
                                                    instance:
                                                      type: string
                                                  required:
                                                    - path
                                                    - key
                                                  additionalProperties: false
                                          additionalProperties: false
                                  required:
                                    - url
                                    - project_id
                                    - file_path
                                    - token
                                  additionalProperties: false
                              additionalProperties: false
                            - type: object
                              properties:
                                github:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    owner:
                                      type: string
                                    repo:
                                      type: string
                                    file_path:
                                      type: string
                                    ref:
                                      type: string
                                    token:
                                      anyOf:
                                        - type: string
                                        - type: object
                                          properties:
                                            vault:
                                              anyOf:
                                                - type: string
                                                - type: object
                                                  properties:
                                                    path:
                                                      type: string
                                                    key:
                                                      type: string
                                                    instance:
                                                      type: string
                                                  required:
                                                    - path
                                                    - key
                                                  additionalProperties: false
                                          additionalProperties: false
                                  required:
                                    - owner
                                    - repo
                                    - file_path
                                    - token
                                  additionalProperties: false
                              additionalProperties: false
                            - type: string
                        overlays:
                          anyOf:
                            - type: array
                              items:
                                anyOf:
                                  - type: object
                                    properties:
                                      url:
                                        type: string
                                      headers:
                                        type: object
                                        properties: {}
                                        additionalProperties: false
                                    required:
                                      - url
                                    additionalProperties: false
                                  - type: object
                                    properties:
                                      gitlab:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          project_id:
                                            type: number
                                            format: float
                                          file_path:
                                            type: string
                                          ref:
                                            type: string
                                          token:
                                            anyOf:
                                              - type: string
                                              - type: object
                                                properties:
                                                  vault:
                                                    anyOf:
                                                      - type: string
                                                      - type: object
                                                        properties:
                                                          path:
                                                            type: string
                                                          key:
                                                            type: string
                                                          instance:
                                                            type: string
                                                        required:
                                                          - path
                                                          - key
                                                        additionalProperties: false
                                                additionalProperties: false
                                        required:
                                          - url
                                          - project_id
                                          - file_path
                                          - token
                                        additionalProperties: false
                                    additionalProperties: false
                                  - type: object
                                    properties:
                                      github:
                                        type: object
                                        properties:
                                          url:
                                            type: string
                                          owner:
                                            type: string
                                          repo:
                                            type: string
                                          file_path:
                                            type: string
                                          ref:
                                            type: string
                                          token:
                                            anyOf:
                                              - type: string
                                              - type: object
                                                properties:
                                                  vault:
                                                    anyOf:
                                                      - type: string
                                                      - type: object
                                                        properties:
                                                          path:
                                                            type: string
                                                          key:
                                                            type: string
                                                          instance:
                                                            type: string
                                                        required:
                                                          - path
                                                          - key
                                                        additionalProperties: false
                                                additionalProperties: false
                                        required:
                                          - owner
                                          - repo
                                          - file_path
                                          - token
                                        additionalProperties: false
                                    additionalProperties: false
                                  - type: string
                            - type: string
                      additionalProperties: false
                    - type: string
              additionalProperties: false
            examples:
              cluster1:
                value: *ref_8
                summary: cluster1 Example
              cluster3:
                value: *ref_44
                summary: cluster3 Example
      responses:
        '204':
          description: No response body
        '400':
          description: This request violates the data schema
          content:
            application/problem+json:
              example: *ref_10
          headers: *ref_2
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /presets:
    get:
      operationId: getPresets
      tags: *ref_43
      summary: Get presets
      description: Returns the current presets.
      responses:
        '200':
          description: Morio presets
          content:
            application/json:
              example:
                MORIO_API_JWT_EXPIRY: 12h
                MORIO_API_LOG_LEVEL: trace
                MORIO_API_PORT: 3000
                MORIO_API_PREFIX: /-/api
                MORIO_BROKER_ADMIN_API_PORT: 9644
                MORIO_BROKER_KAFKA_API_EXTERNAL_PORT: 9092
                MORIO_BROKER_KAFKA_API_INTERNAL_PORT: 19092
                MORIO_BROKER_LOG_LEVEL: warn
                MORIO_BROKER_REST_API_PORT: 8082
                MORIO_BROKER_TOPICS:
                  - _redpanda.audit_log
                  - audit
                  - checks
                  - events
                  - logs
                  - metrics
                  - notifications
                  - cron.hourly
                  - cron.daily
                  - cron.weekly
                  - cron.monthly
                MORIO_BROKER_UID: 101
                MORIO_CA_CERTIFICATE_LIFETIME_DFLT: 750h
                MORIO_CA_CERTIFICATE_LIFETIME_MAX: 17544h
                MORIO_CA_CERTIFICATE_LIFETIME_MIN: 5m
                MORIO_CA_PORT: 9000
                MORIO_CA_UID: 1000
                MORIO_CONFIG_ROOT: /home/jdecock/git/morio/data/config
                MORIO_CONNECTOR_UID: 1000
                MORIO_CONSOLE_PORT: 8080
                MORIO_CONSOLE_PREFIX: console
                MORIO_CORE_CLUSTER_HEARTBEAT_INTERVAL: 30
                MORIO_CORE_CLUSTER_HEARTBEAT_MAX_RTT: 150
                MORIO_CORE_CLUSTER_STATE_CACHE_TTL: 20
                MORIO_CORE_CONFIG_FOLDER: /etc/morio
                MORIO_CORE_CRON_DAILY: 24
                MORIO_CORE_CRON_HOURLY: 1
                MORIO_CORE_CRON_MONTHLY: 720
                MORIO_CORE_CRON_WEEKLY: 720
                MORIO_CORE_LOG_LEVEL: debug
                MORIO_CORE_PORT: 3007
                MORIO_CORE_PREFIX: /-/core
                MORIO_CORE_SERVICE_CERTIFICATE_RENEWAL_DAYS: 135
                MORIO_CORE_UUID_FINGERPRINT_LENGTH: 6
                MORIO_DATA_ROOT: /home/jdecock/git/morio/data/data
                MORIO_DB_HTTP_PORT: 4001
                MORIO_DB_RAFT_PORT: 4002
                MORIO_DOCKER_SOCKET: /var/run/docker.sock
                MORIO_DOWNLOADS_FOLDER: downloads
                MORIO_ERRORS_WEB_PREFIX: https://morio.it/reference/errors/
                MORIO_INTERMEDIATE_CA_COMMON_NAME: Morio Intermediate Certificate Authority
                MORIO_INTERMEDIATE_CA_VALID_YEARS: 5
                MORIO_LOGS_ROOT: /home/jdecock/git/morio/data/logs
                MORIO_NETWORK: morionet
                MORIO_NETWORK_MTU: 1500
                MORIO_NETWORK_SUBNET: 192.168.144.32/28
                MORIO_PROXY_ACCESS_LOG_FILEPATH: /var/log/morio/traefik.access.log
                MORIO_PROXY_LOG_FILEPATH: /var/log/morio/traefik.log
                MORIO_PROXY_LOG_FORMAT: json
                MORIO_PROXY_LOG_LEVEL: DEBUG
                MORIO_REPOS_FOLDER: repos
                MORIO_ROOT_CA_COMMON_NAME: Morio Root Certificate Authority
                MORIO_ROOT_CA_VALID_YEARS: 20
                MORIO_UI_PORT: 3010
                MORIO_UI_TIMEOUT_URL_CHECK: 1500
                MORIO_UNIT_TEST_HOST: unit.test.morio.it
                MORIO_VERSION: 0.2.0
                MORIO_X509_C: BE
                MORIO_X509_CN: Morio
                MORIO_X509_L: Brussels
                MORIO_X509_O: CERT-EU
                MORIO_X509_OU: Engineering Team
                MORIO_X509_ST: Brussels
                NODE_ENV: development
          headers:
            ratelimit: *ref_0
            ratelimit-policy: *ref_1
            Retry-After: *ref_42
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /reload:
    get:
      operationId: reload
      tags: *ref_43
      summary: Reload the API
      description: >-
        This will cause the API to re-initialize itself, including reaching out
        the Morio Core to re-load the settings.


        This is an internal route that is exposed to allow for troubleshooting.
        You probably don't want to use this.
      responses:
        '204':
          description: No response body
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /reseed:
    get:
      operationId: reseed
      tags: *ref_43
      summary: Reseed Morio
      description: >-
        This will trigger reseeding of the settings, followed by a (soft)
        restart of Morio
      responses:
        '204':
          description: No response body
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
  /restart:
    get:
      operationId: restart
      tags: *ref_43
      summary: Restart Morio
      description: >-
        This will cause a soft restart of core, re-bootstrapping itself based on
        the settings on disk.
      responses:
        '204':
          description: No response body
        '401':
          description: Authentication required
          content:
            application/problem+json:
              example: *ref_3
          headers: *ref_2
        '429':
          description: Rate limit exceeded
          content:
            application/problem+json:
              example: *ref_4
          headers: *ref_2
        '500':
          description: Internal server error
          content:
            application/problem+json:
              example: *ref_5
security: *ref_16
